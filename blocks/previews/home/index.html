<script>function homePreview() {
    return {
        prices: {xeta: 1, usd: 0.01},
        supply: 0.971,
        mcap: 2410000,
        transfers: 415180,
        amount: 0,
        exchange: 0,
        web3modal: null,
        provider: null,
        account: null,
        ethBalance: null,
        tokenBalance: null,
        chainId: null,
        bridges: [],
        path: [],
        init() {
            this.mcap = this.price*this.supply*1e9
            var self = this

            ajax('https://api.coingecko.com/api/v3/simple/price?ids=xeta-reality&vs_currencies=USD,ETH,BNB', null, function(data) {
                data = JSON.parse(data)
                self.prices['usd'] = data['xeta-reality']['usd']
                self.prices['eth'] = data['xeta-reality']['eth']
                self.prices['bnb'] = data['xeta-reality']['bnb']
                self.mcap = self.prices['usd']*self.supply*1e9

                // https://api.coingecko.com/api/v3/simple/price?ids=xeta-reality&vs_currencies=USD&include_24hr_change=true
                // self.mcapChange = self.priceChange
                // self.priceChange = data['xeta-reality']['usd_24h_change'].toFixed(2)
            })

            Xeta.statistic.read({key: 'transfers:total:h', time: Math.round(Date.now()/1000 - Date.now()/1000 % (60*60)) - 60*60}).then(function(data) {
                self.transfers = data.value
            })


            this.bridges = [['BNB', 'XETA'], ['ETH', 'XETA'], ['XETA(BSC)', 'XETA'], ['XETA', 'BNB'], ['XETA', 'ETH'], ['XETA', 'XETA(BSC)']]
        },
        async connect() {
            if (window.ethereum) {
                try {
                    this.web3 = new Web3(window.ethereum)
                    accounts = await window.ethereum.request({method: 'eth_requestAccounts'})
                    if (accounts.length > 0) this.account = accounts[0]

                    var self = this
                    window.ethereum.on('accountsChanged', function() {
                        self.balance(self)
                    })
                    window.ethereum.on('chainChanged', function() {
                        self.balance(self)
                    })
                    window.ethereum.on('chainChanged', function() {
                        self.balance(self)
                    })

                    await this.balance()
                } catch (e) {
                    console.log(e)
                }
            } else alert('Browser does not support web3.')
        },
        async disconnect() {
            if (this.provider && this.provider.disconnect) {
                await this.provider.disconnect()
                await this.web3modal.clearCachedProvider()
            }

            this.account = null
            this.ethBalance = null
            this.tokenBalance = null
            this.provider = null
        },
        /**
         * Fetch ETH/BNB balance for first account
         */
        async balance(self) {
            var self = self ? self : this
            self.chainId = await self.web3.eth.getChainId()
            if (![1, 56].includes(self.chainId)) {
                alert('Invalid network')
                return
            }

            self.bridges = [['BNB', 'XETA'], ['ETH', 'XETA'], ['XETA(BSC)', 'XETA'], ['XETA', 'BNB'], ['XETA', 'ETH'], ['XETA', 'XETA(BSC)']].filter(function(b) {
                if (self.chainId == 1 && (b[0] == 'ETH' || b[1] == 'ETH')) return true
                else if (self.chainId == 56 && (b[0] != 'ETH' && b[1] != 'ETH')) return true
            })
            self.path = self.bridges[0]

            var accounts = await self.web3.eth.getAccounts()
            self.account = accounts[0]

            var balance = await self.web3.eth.getBalance(self.account)
            self.ethBalance = self.web3.utils.fromWei(balance, 'ether')

            if (self.chainId == 56) self.tokenBalance = self.xetaBscBalance()
        },
        xetaBscBalance() {
            var contract = new this.web3.eth.Contract(Constants.bscAbi, Constants.bscXeta);
            var self = this

            contract.methods.balanceOf(this.account).call(function(error, result) {
                if (result) {
                    var bal = Big(result).div(1e9).toNumber()
                    if (bal > 1) self.tokenBalance = bal
                }
            })
        },
        bridge() {
            if (Xeta.config.dev) alert('Bridge swaps are only supported on mainnet. Please switch.')

            if (['ETH', 'BNB'].includes(this.path[0]) && this.path[1] == 'XETA') this.eth2xeta()
            else if (this.path[0] == 'XETA(BSC)' && this.path[1] == 'XETA') this.tokens2xeta()
            else if (this.path[0] == 'XETA' && ['ETH', 'BNB'].includes(this.path[1])) this.xeta2eth()
            else if (this.path[0] == 'XETA' && this.path[1] == 'XETA(BSC)') this.xeta2tokens()
        },
        eth2xeta() {
            this.web3.eth.sendTransaction({
                from: this.account,
                to: Constants.ethBridge,
                value: this.web3.utils.toWei(String(this.amount), 'ether'),
                data: this.web3.utils.toHex(Xeta.config.publicKey),
                gas: 50000,
            })
        },
        tokens2xeta() {
            var contract = new this.web3.eth.Contract(Constants.bscAbi, Constants.bscXeta);
            var self = this

            if (this.chainId != 56) return
            var data = contract.methods.transfer(
                Constants.ethBridge,
                this.web3.utils.toWei(String(this.amount), 'gwei'),
                Xeta.config.publicKey,
            ).encodeABI().replace('0x56b8c724', '0xa9059cbb')

            this.web3.eth.sendTransaction({
                from: this.account,
                to: Constants.bscXeta,
                gas: 250000,
                value: this.web3.utils.toWei(String(0), 'ether'),
                data: data
            }, function(error, result) {
            })
        },
        xeta2eth() {
            action('transfer.create', {
                from: Xeta.config.publicKey,
                to: Constants.xetaBridge,
                amount: this.amount,
                token: Xeta.config.xetaAddress,
                message: JSON.stringify([this.path[1], this.account]),
            })
        },
        xeta2tokens() {
            action('transfer.create', {
                from: Xeta.config.publicKey,
                to: Constants.xetaBridge,
                amount: this.amount,
                token: Xeta.config.xetaAddress,
                message: JSON.stringify(['XETA', this.account]),
            })
        },
        rate() {
            var isXeta = this.path[0] && this.path[0].includes('XETA')
            var base = parseFloat(this.prices[this.path[0] && this.path[0].includes('XETA') ? 'xeta' : this.path[0].toLowerCase()])
            var quote = parseFloat(this.prices[this.path[1] && this.path[1].includes('XETA') ? 'xeta' : this.path[1].toLowerCase()])
            var slippage = base == quote ? 1 : 0.9875
            this.exchange = isXeta ? formatNumber(this.amount*quote*slippage, 4) : formatNumber(this.amount/base*slippage)
        }
    }
}</script><script type="text/javascript" src="https://unpkg.com/web3@1.2.11/dist/web3.min.js"></script><div x-data="homePreview" class="bg-black bg-opacity-100 rounded-2xl px-12 py-6 mb-4 lg:mb-6 bg-center bg-cover relative section z-0" style="background-image: url(https://xetareality.com/img/banner1.jpeg)"><div class="bg-black opacity-50 absolute top-0 left-0 w-full h-full z-10 rounded-2xl"></div><div class="flex flex-wrap z-20 relative mt-6"><div class="w-full md:w-3/5"><p class="text-2xl py-2 text-gray-100 tracking-wider">Xeta Reality Blockchain</p><p class="py-2 text-white font-light mb-4">Xeta Reality is a serverless Layer-1 blockchain for Metaverse, Gaming, and NFT applications. Xeta's mission is to onboard 100 million users to the Metaverse by developing intuitive applications & interfaces for mainstream adoption.</p><a href="https://xetareality.com" target="_blank" class="text-lg cursor-pointer block underline text-gray-100 hover:text-pink-400 tracking-wider">Visit Website â†’</a> <a href="https://xetareality.com/whitepaper.pdf" target="_blank" class="text-sm block cursor-pointer text-gray-300 hover:text-pink-400 tracking-wider">Read Whitepaper</a></div></div><div class="rounded-2xl mt-6 flex flex-wrap relative z-20"><div class="py-4 text-left w-1/2 md:w-1/4"><div class="flex flex-col"><span class="text-sm uppercase font-semibold text-gray-100 tracking-wider">Transfers</span> <span class="font-semibold text-4xl pt-2 pb-3 text-white" x-text="formatNumber(transfers)"></span></div></div><div class="py-4 text-left w-1/2 md:w-1/4"><div class="flex flex-col"><span class="text-sm uppercase font-semibold text-gray-100 tracking-wider">XETA Price</span> <span class="font-semibold text-4xl pt-2 pb-3 text-white" x-text="'$'+formatNumber(prices.usd, 4)"></span></div></div><div class="py-4 text-left w-1/2 md:w-1/4"><div class="flex flex-col"><span class="text-sm uppercase font-semibold text-gray-100 tracking-wider">Circ. Supply</span> <span class="font-semibold text-4xl pt-2 pb-3 text-white" x-text="supply+'B'"></span></div></div><div class="py-4 text-left w-1/2 md:w-1/4"><div class="flex flex-col"><span class="text-sm uppercase font-semibold text-gray-100 tracking-wider">Market Cap</span> <span class="font-semibold text-4xl pt-2 pb-3 text-white" x-text="'$'+formatNumber(mcap, 0)"></span></div></div></div></div>