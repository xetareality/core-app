<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Xeta Token</title>
        <meta name="description" content="">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no, viewport-fit=cover">

        <!-- Favicons -->
        <link rel="icon" type="image/png" href="/media/favicon.png">
        <link rel="apple-touch-icon" href="/media/favicon.png">

        <link href="https://unpkg.com/tailwindcss@^2/dist/tailwind.min.css" rel="stylesheet" />
        <script defer src="https://unpkg.com/@alpinejs/persist@3.x.x/dist/cdn.min.js"></script>
        <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>

        
        
        <!-- Scripts -->
        <script src="/scripts/xeta.js"></script>
        <script src="/scripts/media.js"></script>
        <script src="/scripts/utils.js"></script>
        <script src="/scripts/main.js"></script>
        <script src="/scripts/custom.js"></script>

        <!-- Styles -->
        
        <link rel="stylesheet" href="/styles/main.css">
        <link rel="stylesheet" href="/styles/custom.css">

        <!-- Global site tag (gtag.js) - Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-CTL2PW36PM"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());

            gtag('config', 'G-CTL2PW36PM');
        </script>

        
    </head>
    <body>
        <div class="flex flex-col mx-auto w-full min-h-screen text-gray-300 relative bg-center bg-cover" style="background-image: url(/media/background.jpg)">
            <header x-data id="page-header" class="flex flex-none items-center bg-black">
    <div class="flex flex-wrap justify-between container xl:max-w-6xl mx-auto px-4 lg:px-8 py-2">
        <div class="hidden md:flex w-full justify-center mb-2 md:mb-0 md:justify-start md:w-2/5 flex items-center">
            <a href="/" class="flex text tracking-wide text-gray-100 hover:text-pink-400">
                <img class="w-6 h-6 mr-2" src="/media/favicon.png" />
                <span class="inline">Xeta Blockchain Explorer</span>
            </a>
        </div>
        <div class="w-full justify-center md:justify-end md:w-3/5 flex flex items-center font-light">
            <nav class="flex text-sm">
                <a href="/" class="cursor-pointer px-3 py-2 rounded-2xl text-gray-200 hover:bg-gray-800">
                    <span>Network Stats</span>
                </a>
                <a href="javascript:void(0), alert('Coming soon')" class="cursor-pointer px-3 py-2 rounded-2xl text-gray-200 hover:bg-gray-800">
                    <span>Tokens</span>
                </a>
                <a href="javascript:void(0), alert('Coming soon')" class="cursor-pointer px-3 py-2 rounded-2xl text-gray-200 hover:bg-gray-800">
                    <span>NFTs</span>
                </a>
                <a href="https://xetareality.com" class="cursor-pointer px-3 py-2 rounded-2xl text-gray-200 hover:bg-gray-800">
                    <span>About Xeta</span>
                </a>

                <span @click="showModal('walletModal')" x-show="!Alpine.sstore('publicKey')" class="cursor-pointer font-medium px-4 py-2 rounded-2xl bg-pink-700 hover:bg-pink-600 text-white">
                    <span>Connect Wallet</span>
                </span>

                <div x-cloak x-show="Alpine.sstore('publicKey')" @click="showModal('actionsModal')" class="cursor-pointer font-medium px-4 py-2 rounded-2xl bg-pink-700 hover:bg-pink-600 text-white">
                    <span x-text="'Wallet: '+String(Alpine.sstore('publicKey')).slice(0, 10)+'...'"></span>
                </div>
            </nav>
        </div>
    </div>
</header>
            <main id="page-content" class="flex flex-auto flex-col max-w-full">
                <div class="container xl:max-w-6xl mx-auto p-4 lg:p-8">
                    <div id="inner-width" class="block"></div>
                    
    <script>
function initSearch() {
    return {
        searchQuery: '',
        searchLoading: false,
        searchResults: [],
        searchActive: false,
        defaultIcons: {
            transaction: 'https://raw.githubusercontent.com/xetareality/xetareality.github.io/main/img/favicon-32x32.png',
            token: 'https://raw.githubusercontent.com/xetareality/xetareality.github.io/main/img/favicon-32x32.png',
            pool: 'https://raw.githubusercontent.com/xetareality/xetareality.github.io/main/img/favicon-32x32.png',
            address: 'https://raw.githubusercontent.com/xetareality/xetareality.github.io/main/img/favicon-32x32.png',
        },
        search: function() {
            if (!this.searchQuery) this.searchResults = []
            if (!this.searchQuery || this.searchLoading) return

            this.searchLoading = true
            var self = this

            ajax(INTERFACE+'/search?query='+this.searchQuery, null, function(data) {
                self.searchResults = JSON.parse(data)
                self.searchResults = self.searchResults.map(r => ({...r, ...{path: '/'+r.type+(r.type == 'transaction' ? '/?signature=' : '/?address=')+r.key}}))
                console.log(self.searchResults)
                self.searchLoading = false
            }, function(status, self) {
                self.searchLoading = false
            })
        },
    }
}
</script>

<div class="flex flex-wrap items-center mb-4 lg:mb-8">
    <h1 class="text-2xl w-full md:w-1/3 pr-4 py-4 md:py-1 text-gray-100 tracking-wider"> Details</h1>
    <div class="w-full md:w-2/3">
        <div class="" x-data="initSearch()">
            <div class="w-full flex w-full justify-end relative">
                <input @keyup.debounce="search()" x-model.debounce="searchQuery" @focus="searchActive = true, searchQuery.length ? search() : null" @blur.outside="searchActive = false, searchResults = []" placeholder="Search (for Tokens, NFTs, Transactions, Pools, Addresses...)" type="input" class="font-light placeholder-gray-100 rounded-2xl shadow border-pink-500 focus:border-pink-400 border-2 transition-all px-4 py-2 bg-transparent text-lg text-gray-100 outline-none focus:outline-none overflow-hidden w-full">
                
                <div x-cloak x-show="focus && searchResults.length" class="absolute top-0 left-0 mt-12 w-full flex justify-center">
                    <div class="z-50 bg-gray-800 shadow block w-full rounded-2xl">
                        <ul class="w-full flex flex-wrap justify-between overflow-y-scroll" style="max-height: 300px;">
                            <template x-for="result in searchResults">
                                <li @click="window.location.href = result.path" class="w-full">
                                    <div class="cursor-pointer rounded-2xl overflow-hidden w-full block hover:bg-pink-700 px-4 py-2 flex justify-start items-center">
                                        <div class="mr-3">
                                            <img class="w-8 h-8" :class="{'opacity-20': !result.icon}" :src="result.icon ? result.icon : '/media/empty-icon.png'" />
                                        </div>

                                        <div class="">
                                            <p class="block">
                                                <span class="text-xs text-gray-200 uppercase" x-text="result.type"></span>
                                                <span class="text-xs text-white break-words" x-text="result.name ? '('+result.name.slice(0,50)+')' : ''"></span>
                                            </p>
                                            
                                            <span class="block text-sm text-white break-words underline" x-text="result.key"></span>
                                        </div>
                                    </div>
                                </li>
                            </template>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
    <script>
function loadDetails() {
    return {
        details: {},
        active: window.location.pathname.slice(1, -1) != 'pool',
        init() {
            var self = this
            document.addEventListener('resourceLoaded', function (e) {
                var resource = window.location.pathname.slice(1, -1)
                var data = Alpine.store(resource)
                
                if (resource == 'address') {
                    if (data.pool) window.location.href = '/pools/?address='+data.pool.address
                    data = Object.assign({}, data.account, data.balance)
                }

                var tokenPreview = data.tokenPreview ? data.tokenPreview.ticker+(data.tokenPreview.name ? ' ('+data.tokenPreview.name+')' : '')+(data.tokenPreview.icon ? '<img class="h-6 w-6 ml-2" src="'+data.tokenPreview.icon+'" />' : '') : ''
                var poolPreview = data.poolPreview ? (data.poolPreview.name ? data.poolPreview.name+' ' : '')+data.poolPreview.type : ''

                for (var k in data) {
                    if (['created', 'expires', 'unlocks'].includes(k)) {
                        if (Date.now()-data[k].toNumber() > 30*24*60*60*1000) self.details[k] = new Date(data[k].toNumber()).toLocaleString()
                        else self.details[k] = formatTime(new Date(data[k].toNumber()))+' ('+new Date(data[k].toNumber()).toLocaleString()+')'
                    } else if (['minTime', 'maxTime'].includes(k)) {
                        self.details[k] = formatTime(new Date(Date.now()-parseInt(data[k])), false)
                    } else if (['signature', 'input'].includes(k)) {
                        self.details[k] = wrap.transaction(data[k])
                    } else if (['pool', 'owner'].includes(k)) {
                        self.details[k] = wrap.pool(data[k], poolPreview)
                    } else if (['token'].includes(k)) {
                        self.details[k] = wrap.token(data[k], tokenPreview)
                    } else if (['address'].includes(k)) {
                        if (resource == 'token') wrap.token(data[k])
                        else if (resource == 'pool') wrap.pool(data[k])
                    } else if (['hash'].includes(k)) {
                        if (resource == 'claim') self.details[k] = wrap.claim(data[k])
                        else if (resource == 'allowance') self.details[k] = wrap.allowance(data[k])
                    } else if (['from', 'to', 'leader', 'creator', 'sender'].includes(k)) {
                        self.details[k] = wrap.address(data[k])
                    } else if (['links'].includes(k)) {
                        self.details[k] = data[k].map(l => wrap.link(l)).join('')
                    } else if (['outputs'].includes(k)) {
                        self.details[k] = data[k].map(t => wrap[t.split(':')[0]][t.split(':')[1]]).join('')
                    } else self.details[k] = String(data[k])

                    if (self.details[k] == '[object Object]') delete self.details[k]
                }
            })
        }
    }
}
</script>

<div x-data="loadDetails()">
    <div class="bg-black rounded-2xl px-6 py-4 mb-4 lg:mb-12 section">
        <div @click="active = !active" class="flex justify-between items-center cursor-pointer">
            <p class="text-lg py-2 text-gray-100">Details</p>
            <span class="cursor-pointer underline text-gray-200 text-sm font-light">
                <span x-text="active ? 'Close' : 'Open'">Open</span> Details
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="inline ml-1 -mt-0.5" viewBox="0 0 16 16">
                  <path x-cloak x-show="!active" fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/>
                  <path x-cloak x-show="active" fill-rule="evenodd" d="M7.646 4.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1-.708.708L8 5.707l-5.646 5.647a.5.5 0 0 1-.708-.708l6-6z"/>
                </svg>
            </span>
        </div>
        <table x-cloak x-show="active" class="w-full table-fixed font-light text-sm">
            <thead>
                <tr>
                    <th class="text-gray-400 text-left uppercase w-1/3"></th>
                    <th class="text-gray-400 text-left uppercase w-2/3"></th>
                </tr>
            </thead>
            <tbody>
                <template x-for="[key, value] in Object.entries(details)">
                    <tr class="border-b border-gray-800">
                        <td class="py-2 text-gray-400 capitalize text-sm font-semibold py-2" x-text="key"></td>
                        <td @click="$el.classList.toggle('truncate')" class="text-right text-white truncate break-all py-2" x-html="value"></td>
                    </tr>
                </template>
            </tbody>
        </table>
    </div>
</div>
    <script>
function tokenExplorer() {
    return {
        tab: 'transactions',
        transactions: [],
        holders: [],
        address: gup('address'),
        depleted: {},
        init() {
            this.loadTransactions()
        },
        loadTransactions() {
            if (this.depleted.transactions) return
            var self = this
            var last = this.transactions.length ? '&signature='+this.transactions.slice(-1)[0].signature+'&created='+this.transactions.slice(-1)[0].created : ''
            ajax(INTERFACE+'/transactions?token='+this.address+'&extended=1&sort=DESC'+last, null, function(data) {
                data = JSON.parse(data)
                if (!data.length) self.depleted.transactions = true
                self.transactions = self.transactions.concat(data)
            })
        },
        loadHolders() {
            if (this.depleted.holders) return
            var self = this
            var last = this.holders.length ? '&address='+this.holders.slice(-1)[0].address+'&amount='+this.holders.slice(-1)[0].amount : ''
            ajax(INTERFACE+'/balances?token='+this.address+'&extended=1&sort=DESC'+last, null, function(data) {
                data = JSON.parse(data)
                if (!data.length) self.depleted.holders = true
                self.holders = self.holders.concat(data)
            })
        },
    }
}
</script>

<div x-data="tokenExplorer()">
    <div class="bg-black rounded-2xl px-2 pt-2 mb-2 font-light text-gray-200 section">
        <div class="flex flex-wrap">
            <div @click="tab = 'transactions', !transactions.length ? loadTransactions() : ''" :class="{'border-pink-700': tab == 'transactions'}" class="inline border-b-4 border-gray-900 hover:border-pink-700 px-4 py-2 cursor-pointer">transactions</div>
            <div @click="tab = 'holders', !holders.length ? loadHolders() : ''" :class="{'border-pink-700': tab == 'holders'}" class="inline border-b-4 border-gray-900 hover:border-pink-700 px-4 py-2 cursor-pointer">Holders</div>
        </div>
    </div>

    <div x-cloak x-show="tab == 'transactions'" class="bg-black rounded-2xl py-4 mb-4 lg:mb-12">
        <p class="text-lg py-2 px-6 text-gray-100">transactions</p>

        
        <table class="w-full table-fixed font-light text-sm">
    <thead>
        <tr class="text-gray-400">
            <th class="truncate py-2 pl-6 pr-4 text-left uppercase w-1/3 md:w-1/5">
                Signature
            </th>
            <th class="truncate py-2 pr-4 text-left uppercase w-1/4 md:w-1/6">
                Value
            </th>
            <th class="hidden md:table-cell truncate truncate py-2 pr-4 text-left uppercase w-1/6">
                Function
            </th>
            <th class="hidden md:table-cell truncate py-2 pr-4 text-left uppercase w-1/6">
                Created
            </th>
            <th class="truncate py-2 pr-4 text-left uppercase w-1/4 md:w-1/6">
                From
            </th>
            <th class="truncate py-2 pr-6 text-left uppercase w-1/4 md:w-1/6">
                To
            </th>
        </tr>
    </thead>
    <tbody>
        <template x-for="(tx, i) in transactions">
            <tr :class="{'bg-gray-900 bg-opacity-50': i % 2 == 0}" class="hover:bg-gray-900 text-white">
                <td class="truncate pr-4 pl-6 py-2">
                    <a x-text="tx.signature" :href="'/transaction/?signature='+tx.signature" class="underline hover:text-pink-400"></a>
                </td>
                <td class="truncate pr-4 py-2">
                    <a :href="'/token/?address='+tx.token" x-html="tx.amount.toString()+(tx.tokenPreview ? (tx.tokenPreview.ticker ? ' '+tx.tokenPreview.ticker : '') : '')" class="hover:text-pink-400"></a>
                </td>
                                        
                <td x-text="tx.function ? tx.function : ''" class="hidden md:table-cell truncate pr-4 py-2 uppercase">
                </td>
                <td x-text="formatTime(tx.created)" class="hidden md:table-cell truncate pr-4 py-2">
                </td>
                <td class="truncate pr-4 py-2">
                    <a x-text="tx.from" :href="'/address/?address='+tx.from" class="underline hover:text-pink-400"></a>
                </td>
                <td class="truncate pr-4 py-2">
                    <a x-text="tx.to" :href="'/address/?address='+tx.to" class="underline hover:text-pink-400"></a>
                </td>
            </tr>
        </template>
    </tbody>
</table>
        
        <div x-show="!depleted.transactions" class="pt-6 flex justify-center text-sm">
            <span @click="loadTransactions()" class="cursor-pointer underline w-full text-center text-sm text-gray-100 py-2 hover:bg-gray-900 rounded">Load more</span>
        </div>
    </div>
    
    <div x-cloak x-show="tab == 'holders'" class="bg-black rounded-2xl px-6 py-4 mb-4 lg:mb-12">
        <p class="text-lg py-2 px-6 text-gray-100">Holder Distribution</p>

        <table class="w-full table-fixed">
            <thead>
                <tr>
                    <th class="py-2 text-gray-400 text-left uppercase text-sm w-1/3">
                        Address
                    </th>
                    <th class="py-2 text-gray-400 text-left uppercase text-sm w-1/3">
                        Amount
                    </th>
                    <th class="py-2 text-gray-400 text-right uppercase text-sm w-1/3 md:w-1/4">
                        Percent
                    </th>
                </tr>
            </thead>
            <tbody>
                <template x-for="balance in holders">
                    <tr>
                        <td class="truncate pr-4 py-2">
                            <a :href="'/address/?address='+balance.address" x-text="balance.address" class="underline hover:text-pink-400"></a>
                        </td>
                        <td x-text="balance.amount+(balance.tokenPreview.ticker ? ' '+balance.tokenPreview.ticker : '')" class="truncate py-2">
                        </td>
                        <td x-text="$store.token ? (balance.amount/$store.token.supply*100).toFixed(2)+'%' : 0+'%'" class="truncate py-2 text-right">
                        </td>
                    </tr>
                </template>
            </tbody>
        </table>

        <div x-show="!depleted.holders" class="pt-6 flex justify-center text-sm">
            <span @click="loadHolders()" class="cursor-pointer underline w-full text-center text-sm text-gray-100 py-2 hover:bg-gray-900 rounded">Load more</span>
        </div>
    </div>
</div>

                </div>
            </main>   
            <footer id="page-footer" class="bg-black">
    <div class="text-center flex justify-between items-center py-4 text-sm xl:max-w-6xl mx-auto px-4 lg:px-8">
        <div class="">
            <span class="font-light">Xeta Reality <script>document.write((new Date).getFullYear());</script></span>
        </div>
        <div class="">
            <a href="https://xetareality.com" target="_blank" class="font-light text-pink-400 hover:text-pink-600 hover:underline">Xeta Reality Website</a>
        </div>
    </div>
</footer>
        </div>

        <script>
function alertModal() {
    return {
        message: null,
        init(message) {
            this.message = message
        }
    }
}
</script>
<div x-cloak name="alertModal" id="alert-modal" x-show.transition.opacity="$store.modal == 'alertModal'" x-data="alertModal" class="z-50 fixed w-full h-full top-0 left-0">
    <div @click="hideModal()" class="backdrop absolute w-full h-full bg-black opacity-75 z-0"></div>

    <div @click="hideModal()" class="relative cursor-pointer flex w-full justify-center py-4 text-white text-sm z-50">
        <svg class="fill-current text-white mt-0.5" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18">
            <path d="M14.53 4.53l-1.06-1.06L9 7.94 4.53 3.47 3.47 4.53 7.94 9l-4.47 4.47 1.06 1.06L9 10.06l4.47 4.47 1.06-1.06L10.06 9z"></path>
        </svg>
        <span class="ml-1">Close</span>
    </div>

    <div class="overflow-scroll max-h-full mx-auto w-full md:w-1/2 pb-32 z-50 relative">
        <div class="rounded-3xl shadow w-full relative bg-white px-4 py-4">
            <p class="text-lg text-gray-700 text-center py-4 px-8" x-text="message ? message : ''"></p>
        </div>
    </div>
</div>
        <script>
function walletModal() {
    return {
        selection: null,
        seed: null,
        password: null,
        publicKey: null,
        privateKey: null,
        transacting: false,
        init() {},
        /**
         * Generate keys
         */
        async generateKeys() {
            this.selection = 'generate'
            var keys = await Xeta.wallet.generateKeypair()
            this.publicKey = keys[0]
            this.privateKey = keys[1]
            Alpine.sstore('publicKey', this.publicKey)
            Alpine.sstore('privateKey', this.privateKey)
        },
        /**
         * Create credentials
         */
        async createCredentials() {
            if (!this.transacting) {
                var self = this;
                var data = {seed: this.seed, password: this.password}
                Alpine.sstore('seed', this.seed)
                Alpine.sstore('password', this.password)
                this.transacting = true

                Xeta.credentials.init({seed: this.seed, password: this.password, unsafe: true, create: true}).then(function(data) {
                    self.selection = 'public'
                    self.publicKey = data.public
                    self.password = null
                    self.transacting = false

                    Alpine.sstore('publicKey', data.public)
                    Alpine.sstore('privateKey', data.private)
                    connectWallet()
                }).catch(function(e) {
                    self.transacting = false
                    alert(e)
                })
            }
        },
        /**
         * Init credentials
         */
        async getCredentials() {
            if (!this.transacting) {
                var self = this;
                Alpine.sstore('seed', this.seed)
                Alpine.sstore('password', this.password)
                this.transacting = true

                Xeta.credentials.init({seed: this.seed, password: this.password, unsafe: true}).then(function(data) {
                    self.selection = null
                    self.publicKey = data.public
                    self.password = null
                    self.transacting = false

                    Alpine.sstore('publicKey', data.public)
                    Alpine.sstore('privateKey', data.private)
                    connectWallet()
                    hideModal()
                }).catch(function(e) {
                    self.transacting = false
                    alert(e)
                })
            }
        },
        /**
         * Import keys
         */
        async importKeys() {
            Alpine.sstore('publicKey', this.publicKey)
            Alpine.sstore('privateKey', this.privateKey)
            connectWallet()
            hideModal()
            this.privateKey = null
        }
    }
}
</script>
<div x-cloak name="walletModal" id="wallet-modal" x-show.transition.opacity="$store.modal == 'walletModal'" x-data="walletModal" class="z-50 fixed w-full h-full top-0 left-0">
    <div @click="hideModal()" class="backdrop absolute w-full h-full bg-black opacity-75 z-0"></div>

    <div @click="hideModal()" class="relative cursor-pointer flex w-full justify-center py-4 text-white text-sm z-50">
        <svg class="fill-current text-white mt-0.5" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18">
            <path d="M14.53 4.53l-1.06-1.06L9 7.94 4.53 3.47 3.47 4.53 7.94 9l-4.47 4.47 1.06 1.06L9 10.06l4.47 4.47 1.06-1.06L10.06 9z"></path>
        </svg>
        <span class="ml-1">Close</span>
    </div>

    <div class="overflow-scroll max-h-full mx-auto w-full md:w-1/2 pb-32 z-50 relative">
        <div class="rounded-2xl shadow w-full relative bg-pink-900 px-2 lg:px-8 py-4 bg-top bg-cover" style="background-image: url(/media/background.jpg)">
            <div x-cloak x-show="transacting" class="flex justify-center">
                <div class="spinner"></div>
            </div>
            <div x-cloak x-show="!transacting">
                <div x-show="!selection" class="flex flex-wrap px-2 lg:px-8 text-white font-light">
                    <p class="w-full px-4 py-4 text-2xl text-center">Create New Wallet</p>

                    <div class="w-1/2 mb-4">
                        <div @click="await generateKeys()" class="mx-4 cursor-pointer rounded-2xl bg-gray-900 bg-opacity-40 hover:bg-black shadow p-4 text-center">
                            <p class="text-lg mb-2">Create new wallet (manage keys yourself)</p>
                            <p class="text-sm">You will receive a public and private key which you need to store securely.</p>
                        </div>
                    </div>
                    <div class="w-1/2 mb-4">
                        <div @click="selection = 'managed'" class="mx-4 cursor-pointer rounded-2xl bg-gray-900 bg-opacity-40 hover:bg-black shadow p-4 text-center">
                            <p class="text-lg mb-2">Create new wallet (managed credentials)</p>
                            <p class="text-sm">Xeta Reality will manage credentials for you, transactions can be signed with these credentials.</p>
                        </div>
                    </div>

                    <p class="w-full px-4 py-4 text-2xl text-center">Import Existing Wallet</p>

                    <div class="w-1/2 mb-4">
                        <div @click="selection = 'import'" class="mx-4 cursor-pointer rounded-2xl bg-gray-900 bg-opacity-40 hover:bg-black shadow p-4 text-center">
                            <p class="text-lg mb-2">Self-managed wallet keys</p>
                            <p class="text-sm">Import wallet via public key. Choose this option if you've created a Xeta private/public key previously.</p>
                        </div>
                    </div>
                    <div class="w-1/2 mb-4">
                        <div @click="selection = 'credentials'" class="mx-4 cursor-pointer rounded-2xl bg-gray-900 bg-opacity-40 hover:bg-black shadow p-4 text-center">
                            <p class="text-lg mb-2">Managed credentials</p>
                            <p class="text-sm">Log-in using your username and password. Choose this option if you have a managed wallet on Xeta.</p>
                        </div>
                    </div>
                </div>

                <div x-show="selection == 'generate'" class="flex flex-wrap w-full px-2 lg:px-8 py-8 text-white font-light">
                    <p @click="selection = null" class="cursor-pointer text-gray-200 mb-4 underline">← Go back</p>

                    <div class="mb-6 w-full">
                        <label for="" class="text-gray-200 text-xs font-semibold uppercase mb-2 block">Your public key (public wallet address)</label>
                        <input x-model="publicKey" @focus="$el.select()" type="text" class="rounded-2xl shadow border-pink-700 focus:border-pink-500 border-2 transition-all px-4 py-2 bg-transparent text-gray-100 font-light outline-none focus:outline-none overflow-hidden w-full" />
                    </div>
      
                    <div class="mb-6 w-full">
                        <label for="" class="text-gray-200 text-xs font-semibold uppercase mb-2 block">Your private key (keep this secret at any cost!)</label>
                        <input x-model="privateKey" @focus="$el.select()" type="text" class="rounded-2xl shadow border-pink-700 focus:border-pink-500 border-2 transition-all px-4 py-2 bg-transparent text-gray-100 font-light outline-none focus:outline-none overflow-hidden w-full" />
                    </div>

                    <div class="w-full">
                        <button @click.prevent="selection = null, privateKey = null, connectWallet(), hideModal()" class="cursor-pointer text-white py-2 px-4 rounded-2xl block text-center bg-black hover:bg-gray-900 text-lg font-light transition-all w-full">I've stored my keys securely - connect wallet & close modal</button>
                    </div>
                </div>

                <form x-data x-show="selection == 'managed'" class="flex flex-wrap w-full px-2 lg:px-8 py-8 text-white font-light">
                    <p @click="selection = null" class="cursor-pointer text-gray-200 mb-4 underline">← Go back</p>

                    <div class="mb-6 w-full">
                        <label for="" class="text-gray-200 text-xs font-semibold uppercase mb-2 block">Email or username</label>
                        <input x-model="seed" data-rules='["required", "minLength:6"]' @input="validate($el)" @blur="validate($el)" type="text" class="rounded-2xl shadow border-pink-700 focus:border-pink-500 border-2 transition-all px-4 py-2 bg-transparent text-gray-100 font-light outline-none focus:outline-none overflow-hidden w-full" />
                        <p class="text-gray-200 text-xs mt-2 hidden"></p>
                    </div>

                    <div class="mb-6 w-full">
                        <label for="" class="text-gray-200 text-xs font-semibold uppercase mb-2 block">Your password</label>
                        <input x-model="password" data-rules='["required", "minLength:6"]' @input="validate($el)" @blur="validate($el)" type="password" class="rounded-2xl shadow border-pink-700 focus:border-pink-500 border-2 transition-all px-4 py-2 bg-transparent text-gray-100 font-light outline-none focus:outline-none overflow-hidden w-full" />
                        <p class="text-gray-200 text-xs mt-2 hidden"></p>
                    </div>

                    <div class="w-full">
                        <button @click.prevent="validForm($root) ? await createCredentials() : ''" type="submit" class="cursor-pointer text-white py-2 px-4 rounded-2xl block text-center bg-black hover:bg-gray-900 text-lg font-light transition-all w-full">Create credentials and show public key</button>
                    </div>
                </form>

                <div x-show="selection == 'public'" class="flex flex-wrap w-full px-2 lg:px-8 py-8 text-white font-light">
                    <div class="mb-6 w-full">
                        <label for="" class="text-gray-200 text-xs font-semibold uppercase mb-2 block">Your public key (public wallet address)</label>
                        <input x-model="publicKey" @focus="$el.select()" type="text" class="rounded-2xl shadow border-pink-700 focus:border-pink-500 border-2 transition-all px-4 py-2 bg-transparent text-gray-100 font-light outline-none focus:outline-none overflow-hidden w-full" />
                    </div>

                    <div class="w-full">
                        <button @click.prevent="selection = null, hideModal()" class="cursor-pointer text-white py-2 px-4 rounded-2xl block text-center bg-black hover:bg-gray-900 text-lg font-light transition-all w-full">I've stored my public key - close this window</button>
                    </div>
                </div>

                <form x-data x-show="selection == 'import'" class="flex flex-wrap w-full px-2 lg:px-8 py-8 text-white font-light">
                    <p @click="selection = null" class="cursor-pointer text-gray-200 mb-4 underline">← Go back</p>

                    <div class="mb-6 w-full">
                        <label for="" class="text-gray-200 text-xs font-semibold uppercase mb-2 block">Your public key (public wallet address)</label>
                        <input x-model="publicKey" data-rules='["required", "minLength:32", "maxLength:44"]' @input="validate($el)" @blur="validate($el)" type="text" class="rounded-2xl shadow border-pink-700 focus:border-pink-500 border-2 transition-all px-4 py-2 bg-transparent text-gray-100 font-light outline-none focus:outline-none overflow-hidden w-full" />
                        <p class="text-gray-200 text-xs mt-2 hidden"></p>
                    </div>

                    <div class="mb-6 w-full">
                        <label for="" class="text-gray-200 text-xs font-semibold uppercase mb-2 block">Your private key</label>
                        <input x-model="privateKey" data-rules='["required", "minLength:32", "maxLength:44"]' @input="validate($el)" @blur="validate($el)" type="password" class="rounded-2xl shadow border-pink-700 focus:border-pink-500 border-2 transition-all px-4 py-2 bg-transparent text-gray-100 font-light outline-none focus:outline-none overflow-hidden w-full" />
                        <p class="text-gray-200 text-xs mt-2 hidden"></p>
                    </div>

                    <div class="w-full">
                        <button @click.prevent="validForm($root) ? await importKeys() : ''" type="submit" class="cursor-pointer text-white py-2 px-4 rounded-2xl block text-center bg-black hover:bg-gray-900 text-lg font-light transition-all w-full">Initialize wallet and close modal</button>
                    </div>
                </form>

                <form x-data x-show="selection == 'credentials'" class="flex flex-wrap w-full px-2 lg:px-8 py-8 text-white font-light">
                    <p @click="selection = null" class="cursor-pointer text-gray-200 mb-4 underline">← Go back</p>

                    <div class="mb-6 w-full">
                        <label for="" class="text-gray-200 text-xs font-semibold uppercase mb-2 block">Email or username</label>
                        <input x-model="seed" data-rules='["required", "minLength:6", "maxLength:40"]' @input="validate($el)" @blur="validate($el)" type="text" class="rounded-2xl shadow border-pink-700 focus:border-pink-500 border-2 transition-all px-4 py-2 bg-transparent text-gray-100 font-light outline-none focus:outline-none overflow-hidden w-full" />
                        <p class="text-gray-200 text-xs mt-2 hidden"></p>
                    </div>

                    <div class="mb-6 w-full">
                        <label for="" class="text-gray-200 text-xs font-semibold uppercase mb-2 block">Your password</label>
                        <input x-model="password" data-rules='["required", "minLength:6", "maxLength:40"]' @input="validate($el)" @blur="validate($el)" type="password" class="rounded-2xl shadow border-pink-700 focus:border-pink-500 border-2 transition-all px-4 py-2 bg-transparent text-gray-100 font-light outline-none focus:outline-none overflow-hidden w-full" />
                        <p class="text-gray-200 text-xs mt-2 hidden"></p>
                    </div>

                    <div class="w-full">
                        <button @click.prevent="validForm($root) ? await getCredentials() : ''" type="submit" class="cursor-pointer text-white py-2 px-4 rounded-2xl block text-center bg-black hover:bg-gray-900 text-lg font-light transition-all w-full">Initialize wallet</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
        <script>
function actionsModal() {
    return {
        selection: null,
        init() {
        },
        backup() {
            showModal('walletModal')
            setData('wallet-modal', {selection: 'generate', publicKey: Alpine.sstore('publicKey'), privateKey: Alpine.sstore('privateKey')})
        }
    }
}
</script>

<div x-cloak name="actionsModal" id="create-modal" x-show.transition.opacity="$store.modal == 'actionsModal'" x-data="actionsModal" class="z-50 fixed w-full h-full top-0 left-0">
    <div @click="selection = null, hideModal()" class="backdrop absolute w-full h-full bg-black opacity-75 z-0"></div>

    <div @click="selection = null, hideModal()" class="relative cursor-pointer flex w-full justify-center py-4 text-white text-sm z-50">
        <svg class="fill-current text-white mt-0.5" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18">
            <path d="M14.53 4.53l-1.06-1.06L9 7.94 4.53 3.47 3.47 4.53 7.94 9l-4.47 4.47 1.06 1.06L9 10.06l4.47 4.47 1.06-1.06L10.06 9z"></path>
        </svg>
        <span class="ml-1">Close</span>
    </div>


    <div class="overflow-scroll max-h-full mx-auto w-full md:w-1/2 pb-32 z-50 relative">
        <div class="rounded-2xl shadow w-full relative bg-pink-900 px-2 lg:px-8 py-4 bg-top bg-cover" style="background-image: url(/media/background.jpg)">
            
            <div x-show="!selection" class="flex flex-wrap justify-center">
                <p class="w-full px-4 py-4 text-2xl text-center text-white font-light">Select Wallet Action</p>
                <ul class="list-none w-2/5 mr-2 text-center">
                    <li @click="window.location.href = '/address/?address='+$lstore('publicKey')" class="cursor-pointer text-white py-2 px-4 rounded-2xl block text-center bg-black hover:bg-gray-900 text-lg font-light transition-all w-full mb-4">View my Pools & Balances</li>
                    <li @click="disconnectWallet(), showModal('walletModal')" class="cursor-pointer text-white py-2 px-4 rounded-2xl block text-center bg-black hover:bg-gray-900 text-lg font-light transition-all w-full mb-4">Change Wallet Address</li>
                    <li @click="disconnectWallet(), hideModal()" class="cursor-pointer text-white py-2 px-4 rounded-2xl block text-center bg-black hover:bg-gray-900 text-lg font-light transition-all w-full mb-4">Disconnect Wallet</li>
                    <li @click="backup()" class="cursor-pointer text-white py-2 px-4 rounded-2xl block text-center bg-black hover:bg-gray-900 text-lg font-light transition-all w-full mb-4">Back-up Keys</li>
                </ul>
                <ul class="list-none w-2/5 ml-2 text-center">
                    <li @click="selection = null" class="cursor-pointer text-white py-2 px-4 rounded-2xl block text-center bg-black hover:bg-gray-900 text-lg font-light transition-all w-full mb-4">Create Transaction</li>
                    <li @click="selection = null" class="cursor-pointer text-white py-2 px-4 rounded-2xl block text-center bg-black hover:bg-gray-900 text-lg font-light transition-all w-full mb-4">Create Token or NFT</li>
                    <li @click="selection = null" class="cursor-pointer text-white py-2 px-4 rounded-2xl block text-center bg-black hover:bg-gray-900 text-lg font-light transition-all w-full mb-4">Create Pool for Token</li>
                    <li @click="selection = null" class="cursor-pointer text-white py-2 px-4 rounded-2xl block text-center bg-black hover:bg-gray-900 text-lg font-light transition-all w-full mb-4">Create Allowance</li>
                </ul>
            </div>

            <div x-cloak x-show="selection == 'transaction'">
                <script>
function transactionModal(args) {
    return {
        transaction: {
            sender: Alpine.store('wallet'),
            from: Alpine.store('wallet'),
            to: args && args.to ? args.to : null,
            token: args && args.token ? args.token : Xeta.config.xetaAddress,
            amount: args && args.amount ? args.amount : '0',
            function: args && args.function ? args.function : null,
            message: args && args.message ? args.message : null,
            nonce: parseInt(Date.now()/1000),
            delegate: true,
        },
        init() {
            // showModal('transactionModal')
        },
        submit() {
            this.transaction.key = window.prompt('Please enter your private key (self-managed keys) or password (managed-for-you keys)')
        }
    }
}
</script>

<div x-cloak name="transactionModal" id="transaction-modal" x-show.transition.opacity="$store.modal == 'transactionModal'" x-data="transactionModal" class="z-50 fixed w-full h-full top-0 left-0">
    <div @click="selection = null, hideModal()" class="backdrop absolute w-full h-full bg-black opacity-75 z-0"></div>

    <div @click="selection = null, hideModal()" class="relative cursor-pointer flex w-full justify-center py-4 text-white text-sm z-50">
        <svg class="fill-current text-white mt-0.5" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18">
            <path d="M14.53 4.53l-1.06-1.06L9 7.94 4.53 3.47 3.47 4.53 7.94 9l-4.47 4.47 1.06 1.06L9 10.06l4.47 4.47 1.06-1.06L10.06 9z"></path>
        </svg>
        <span class="ml-1">Close</span>
    </div>


    <div class="overflow-scroll max-h-full mx-auto w-full md:w-1/2 pb-32 z-50 relative">
        <p class="w-full px-4 py-4 text-2xl text-center">Submit Transaction</p>
        <form x-data>
            <div class="mb-6">
                <label for="" class="text-gray-200 text-xs font-semibold uppercase mb-2 block">From Address</label>
                <input x-model="transaction.from" data-rules='["required", "minLength:2"]' @input="validate($el)" @blur="validate($el)" name="" type="text" class="rounded-2xl shadow border-pink-700 focus:border-pink-500 border-2 transition-all px-4 py-2 bg-transparent text-gray-100 outline-none focus:outline-none overflow-hidden w-full" />
                <p class="text-gray-200 text-xs mt-2 hidden"></p>
            </div>

            <div class="mb-6">
                <label for="" class="text-gray-200 text-xs font-semibold uppercase mb-2 block">To Address</label>
                <input x-model="transaction.to" data-rules='["required", "minLength:2"]' @input="validate($el)" @blur="validate($el)" name="" type="text" class="rounded-2xl shadow border-pink-700 focus:border-pink-500 border-2 transition-all px-4 py-2 bg-transparent text-gray-100 outline-none focus:outline-none overflow-hidden w-full" />
                <p class="text-gray-200 text-xs mt-2 hidden"></p>
            </div>

            <div class="mb-6">
                <label for="" class="text-gray-200 text-xs font-semibold uppercase mb-2 block">Transfer Token</label>
                <div x-data="{options: [['key', 'value'], ['key', 'value'], ['key', 'value']]}">
                    <select name="" @click.stop @select="validate($el)" @blur="validate($el)" x-model="transaction.token" data-rules='["required"]' class="no-arrow rounded-2xl shadow border-pink-700 focus:border-pink-500 border-2 transition-all px-4 py-2 bg-transparent text-gray-100 outline-none focus:outline-none overflow-hidden w-full">
                        <option :value="options[0][0]" x-text="options[0][1]" selected></option>
                        <template x-for="option in options.slice(1)">
                            <option :value="option[0]" x-text="option[1]" :selected="transaction.model == option[0]"></option>
                        </template>
                    </select>
                </div>
                <p class="text-gray-200 text-xs mt-2 hidden"></p>
            </div>

            <div class="mb-6">
                <label for="" class="text-gray-200 text-xs font-semibold uppercase mb-2 block">Transfer Amount</label>
                <input x-model="transaction.amount" name="address" type="number" class="rounded-2xl shadow border-pink-700 focus:border-pink-500 border-2 transition-all px-4 py-2 bg-transparent text-gray-100 outline-none focus:outline-none overflow-hidden w-full" />
                <p class="text-gray-200 text-xs mt-2 hidden"></p>
            </div>

            <div x-data="{advanced: false}">
                <label @click="advanced = !advanced" class="cursor-pointer text-gray-200 text-xs font-semibold uppercase mb-2 block underline mb-4">Advanced</label>
                
                <div x-cloak x-show="advanced" class="mb-6">
                    <label for="" class="text-gray-200 text-xs font-semibold uppercase mb-2 block">Function</label>
                    <input x-model="transaction.function" data-rules='["required", "minimum:2"]' @input="validate($el)" @blur="validate($el)" name="" type="text" class="rounded-2xl shadow border-pink-700 focus:border-pink-500 border-2 transition-all px-4 py-2 bg-transparent text-gray-100 outline-none focus:outline-none overflow-hidden w-full" />
                    <p class="text-gray-200 text-xs mt-2 hidden"></p>
                </div>

                <div x-cloak x-show="advanced" class="mb-6">
                    <label for="" class="text-gray-200 text-xs font-semibold uppercase mb-2 block">Message</label>
                    <textarea x-model="transaction.message" data-rules='["required", "minimum:2"]' @input="validate($el)" @blur="validate($el)" name="" type="text" rows="3" class="rounded-2xl shadow border-pink-700 focus:border-pink-500 border-2 transition-all px-4 py-2 bg-transparent text-gray-100 outline-none focus:outline-none overflow-hidden w-full"></textarea>
                    <p class="text-gray-200 text-xs mt-2 hidden"></p>
                </div>

                <div x-show="advanced" class="mb-6">
                    <label for="" class="text-gray-200 text-xs font-semibold uppercase mb-2 block">Nonce</label>
                    <input x-model="transaction.nonce" name="" type="number" min="1" step="1" class="rounded-2xl shadow border-pink-700 focus:border-pink-500 border-2 transition-all px-4 py-2 bg-transparent text-gray-100 outline-none focus:outline-none overflow-hidden w-full" />
                    <p class="text-gray-200 text-xs mt-2 hidden"></p>
                </div>

                <div x-show="advanced" class="mb-6">
                    <label class="text-gray-200 text-xs font-semibold uppercase mb-2 block cursor-pointer items-center flex select-none">
                        <input :checked="transaction.delegate" x-model="transaction.delegate" type="checkbox" class="mr-2 h-6 w-6">
                        <span>Delegate Fee</span>
                    </label>
                </div>
            </div>

            <div>
                <button @click.prevent="validForm($root) ? submit() : ''" type="submit" class="cursor-pointer text-white py-2 px-4 rounded-2xl block text-center bg-black hover:bg-gray-800 transition-all w-full">Sign Transaction</button>
            </div>
        </form>
    </div>
</div>

            </div>
            <div x-cloak x-show="selection == 'asset'">
            </div>
            <div x-cloak x-show="selection == 'pool'">
            </div>
            <div x-cloak x-show="selection == 'allowance'">
            </div>
        </div>
    </div>
</div>
    </body>
</html>