<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Pool</title>
        <meta name="description" content="">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no, viewport-fit=cover">

        <!-- Favicons -->
        <link rel="icon" type="image/png" href="/media/favicon.png">
        <link rel="apple-touch-icon" href="/media/favicon.png">

        <link href="https://unpkg.com/tailwindcss@^2/dist/tailwind.min.css" rel="stylesheet" />
        <script crossorigin="anonymous" defer src="https://unpkg.com/@alpinejs/persist@3.x.x/dist/cdn.min.js"></script>
        <script crossorigin="anonymous" defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
        <script src="/scripts/xeta.js"></script>
        <script src="/scripts/modules.js"></script>

        <!-- Scripts -->
        <script src="/scripts/utils.js"></script>
        <script src="/scripts/actions.js"></script>
        <script src="/scripts/main.js"></script>
        <script src="/scripts/custom.js"></script>

        <!-- Styles -->
        <link rel="stylesheet" href="/styles/main.css">
        <link rel="stylesheet" href="/styles/custom.css">

        <script crossorigin="anonymous" src="https://cdn.trackjs.com/agent/v3/latest/t.js"></script>
        <script>window.TrackJS && TrackJS.install({token: "317478ac92da4e91b1ab24b27339ecee"})</script>

        <script type="text/javascript" >
           (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
           m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
           (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");
           ym(86865373, "init", {clickmap:true, trackLinks:true, accurateTrackBounce:true, webvisor:true});
        </script>
        <noscript><div><img src="https://mc.yandex.ru/watch/86865373" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

        <script async src="https://www.googletagmanager.com/gtag/js?id=G-CTL2PW36PM"></script>
        <script>
            window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());gtag('config', 'G-CTL2PW36PM');
        </script>

        

        <meta name="robots" content="max-image-preview:large">
        <meta property="og:site_name" content="Xeta Reality">
        <meta property="og:type" content="website">
        <meta property="og:title" content="Xeta Reality Network">
        <meta property="og:description" content="View and interact with this address, pool, transfer or token on the Xeta Blockchain.">
        <meta property="og:image" content="">

        <meta name="twitter:card" content="summary_large_image">
        <meta name="twitter:site" content="@XetaReality">
        <meta name="twitter:creator" content="@XetaReality">
        <meta name="twitter:title" content="Xeta Reality Network">
        <meta name="twitter:description" content="View and interact with this address, pool, transfer or token on the Xeta Blockchain.">
        <meta name="twitter:image" content="">
    </head>
    <body>
        <div class="flex flex-col mx-auto w-full min-h-screen text-gray-300 relative bg-center bg-cover" style="background-image: url(/media/background.jpg)">
            <header x-data id="page-header" class="flex flex-none items-center bg-black">
    <div class="flex flex-wrap justify-between container xl:max-w-6xl mx-auto px-4 lg:px-8 py-2">
        <div class="hidden lg:flex w-full justify-center mb-2 lg:mb-0 lg:justify-start lg:w-2/5 flex items-center">
            <a href="/" class="flex text tracking-wide text-gray-100 hover:text-pink-400">
                <img class="w-6 h-6 mr-2" src="/media/favicon.png" />
                <span class="inline">Xeta Blockchain Explorer</span>
            </a>
            <div @click.prevent="mainnet = !mainnet, $lstore('dev', !mainnet), window.location.reload()" class="bg-transparent ml-4 cursor-pointer flex items-center select-none" x-data="{mainnet: !$lstore('dev')}">
                <div class="relative rounded-full w-6 h-3 transition duration-200 ease-linear bg-gray-600" :class="{'bg-pink-700': mainnet}">
                    <label for="mainnet" class="absolute left-0 bg-white w-3 h-3 rounded-full transition transform duration-100 ease-linear translate-x-0" :class="{'translate-x-full': mainnet}"></label>
                    <input type="checkbox" id="mainnet" name="mainnet" class="appearance-none w-full h-full active:outline-none focus:outline-none">
                </div>
                <span class="ml-2 text-xs text-gray-200 select-none">Testnet</span>
            </div>
        </div>
        <div class="w-full justify-between lg:justify-end lg:w-3/5 flex items-center font-light">
            <nav class="flex flex-wrap text-sm lg:mr-4">
                <a href="/" class="lg:hidden cursor-pointer px-2 lg:px-3 py-2 rounded-2xl text-gray-200 hover:bg-gray-800 select-none text-xs lg:text-sm">
                    <span>Home</span>
                </a>
                <div x-data="{active: false}" class="relative text-xs lg:text-sm">
                    <span @click="active = !active" class="block cursor-pointer px-2 lg:px-3 py-2 rounded-2xl text-gray-200 hover:bg-gray-800 select-none">Tokens</span>
                    <div x-cloak x-show="active" @click.away="active = false" class="absolute right-0 origin-top-right mt-2 w-40 shadow-xl rounded z-50 select-none">
                        <ul class="list-none bg-gray-900 px-2 py-2 rounded-2xl">
                            <li @click="active = false" class="cursor-pointer py-1 rounded-2xl text-gray-200 hover:bg-gray-800 text-center select-none"><a href="/pages/tokens">By Market Cap</a></li>
                            <li @click="active = false" class="cursor-pointer py-1 rounded-2xl text-gray-200 hover:bg-gray-800 text-center select-none"><a href="/pages/trending">By Trending</a></li>
                        </ul>
                    </div>
                </div>
                <div x-data="{active: false}" class="relative text-xs lg:text-sm">
                    <span @click="active = !active" class="block cursor-pointer px-2 lg:px-3 py-2 rounded-2xl text-gray-200 hover:bg-gray-800 select-none">NFTs</span>
                    <div x-cloak x-show="active" @click.away="active = false" class="absolute right-0 origin-top-right mt-2 w-40 shadow-xl rounded z-50 select-none">
                        <ul class="list-none bg-gray-900 px-2 py-2 rounded-2xl">
                            <li @click="active = false" class="cursor-pointer py-1 rounded-2xl text-gray-200 hover:bg-gray-800 text-center select-none"><a href="/pages/collections">Top Collections</a></li>
                            <li @click="active = false" class="cursor-pointer py-1 rounded-2xl text-gray-200 hover:bg-gray-800 text-center select-none"><a href="/pages/auctions">Top Auctions</a></li>
                        </ul>
                    </div>
                </div>
                <a href="/pages/statistics" class="cursor-pointer px-2 lg:px-3 py-2 rounded-2xl text-gray-200 hover:bg-gray-800 select-none text-xs lg:text-sm">
                    <span>Stats</span>
                </a>
                <a href="https://xetareality.com" target="_blank" class="cursor-pointer px-2 lg:px-3 py-2 rounded-2xl text-gray-200 hover:bg-gray-800 select-none text-xs lg:text-sm">
                    <span>About</span>
                </a>
            </nav>

            <div class="text-sm flex">
                <span @click="showModal('walletModal')" x-show="!Alpine.store('publicKey')" class="cursor-pointer font-medium px-2 lg:px-4 py-2 rounded-2xl bg-pink-700 hover:bg-pink-600 text-white select-none">Connect</span>

                <div x-cloak x-show="Alpine.store('publicKey')" @click="showModal('actionsModal')" class="cursor-pointer font-medium px-2 lg:px-4 py-2 rounded-2xl bg-pink-700 hover:bg-pink-600 text-white select-none">
                    <span x-text="String(Alpine.store('publicKey')).slice(0, 10)+'...'"></span>
                </div>
            </div>
        </div>
    </div>
</header>
            <main id="page-content" class="flex flex-auto flex-col max-w-full">
                <div class="container xl:max-w-6xl mx-auto p-4 lg:p-8">
                    <div id="inner-width" class="block"></div>
                    
    <script>
function initSearch() {
    return {
        query: '',
        searching: false,
        results: [],
        active: false,
        search: function() {
            if (!this.query) this.results = []
            if (!this.query || this.searching) return

            this.searching = true
            var self = this

            Xeta.search.query({query: this.query}).then(function(data) {
                self.results = data.map(function(d) {
                    return Object.assign({}, d, {path: '/'+d.type+'/?'+Xeta.utils.key(d.type)+'='+d.key})
                })

                self.searching = false
            }, function(status, self) {
                self.searching = false
            })
        },
    }
}
</script>

<div x-data class="flex flex-wrap items-center mb-4 lg:mb-8">
    <h1 class="text-2xl w-full lg:w-1/3 pr-4 py-4 lg:py-1 text-gray-100 tracking-wider font-light capitalize" x-text="$store.resource ? $store.resource.split('/').slice(-1)[0] : 'Xeta Explorer'"></h1>
    <div class="w-full lg:w-2/3">
        <div class="" x-data="initSearch()">
            <div class="w-full flex justify-end relative">
                <input @keyup.debounce="search()" x-model.debounce="query" @focus="active = true, query.length ? search() : null" @blur.outside="active = false, results = []" placeholder="Search (for Tokens, NFTs, Transactions, Pools, Addresses...)" type="input" class="font-light placeholder-gray-100 rounded-2xl shadow border-pink-500 focus:border-pink-400 border-2 transition-all px-4 py-2 bg-transparent text-lg text-gray-100 outline-none focus:outline-none overflow-hidden w-full focus:ring focus:ring-purple-500">
                
                <div x-cloak x-show="active && results.length" @click.away="active = false" class="absolute top-0 left-0 mt-12 w-full flex justify-center select-none">
                    <div class="z-50 bg-gray-900 shadow block w-full rounded-2xl">
                        <ul class="w-full flex flex-wrap justify-between overflow-y-scroll" style="max-height: 300px;">
                            <template x-for="result in results">
                                <li @click="window.location.href = result.path" class="w-full select-none">
                                    <div class="cursor-pointer rounded-2xl overflow-hidden w-full block hover:bg-black transition-all px-4 py-2 flex justify-start items-center border-b border-gray-700">
                                        <div class="mr-3">
                                            <img class="w-8 h-8 rounded" :class="{'opacity-20': !result.preview}" :src="result.preview ? result.preview : '/media/empty.png'" onerror="this.src = '/media/empty.png'" />
                                        </div>

                                        <div class="">
                                            <p class="block">
                                                <span class="text-xs text-gray-200 uppercase" x-text="result.type"></span>
                                                <span class="text-xs text-gray-200 break-words" x-text="result.name ? '('+result.name.slice(0,50)+')' : ''"></span>
                                            </p>
                                            
                                            <span class="block text-sm text-gray-200 break-words" x-text="result.key"></span>
                                        </div>
                                    </div>
                                </li>
                            </template>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
    <script>
function poolPreview() {
    return {
        init() {
            var self = this
            document.addEventListener('resourceLoaded', function (e) {
                self.status()
                if (Alpine.store('pool').expires) setInterval(function() {
                    Alpine.store('pool').timer = timer(Alpine.store('pool').expires)
                }, 1000)
            })
        },
        status() {
            var pool = Alpine.store('pool')
            var closed = pool.closed
            var expired = pool.expires && pool.expires < Date.now()
            var overXetaLimit = pool.xetaLimit && pool.xetaBalance && parseFloat(pool.xetaBalance) >= parseFloat(pool.xetaLimit)
            var overTokenLimit = pool.tokenLimit && pool.tokenBalance && parseFloat(pool.tokenBalance) >= parseFloat(pool.tokenLimit)
            var overTransfersLimit = pool.transfersLimit && pool.transfersCount && pool.transfersCount >= pool.transfersLimit
            this.open = !closed && !expired && !overXetaLimit && !overTokenLimit && !overTransfersLimit
        },
        open: true,
    }
}
</script>

<div x-data="poolPreview">
    <div x-cloak x-show="$store.pool.program == 'auction'" x-data class="bg-black rounded-2xl px-6 py-4 mb-4 lg:mb-12 section">
    <div class="w-full flex flex-wrap justify-between items-center mb-4">
        <p class="text-2xl font-medium py-2 text-white w-full lg:w-3/4" x-text="$store.pool.name ? $store.pool.name+' (Auction Pool)' : 'Auction Pool'"></p>
        <div x-data="{active: false}" class="w-full lg:w-1/4 flex relative">
            <span @click="open ? action('auction.transfer') : action('auction.resolve')" class="w-5/6 cursor-pointer text-white py-2 pl-8 rounded-2xl rounded-r-none text-center bg-pink-700 hover:bg-pink-900 text-lg font-medium transition-all" x-text="open ? 'Bid' : 'Resolve'"></span>
            <span @click="active = !active" class="w-1/6 cursor-pointer text-white py-2 rounded-2xl rounded-l-none text-center bg-pink-800 hover:bg-pink-900 text-lg font-medium transition-all">
                <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="currentColor" class="mx-auto mt-1" viewBox="0 0 16 16">
                  <path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/>
                </svg>
            </span>
            <div x-cloak x-show="active" @click.away="active = false" class="absolute right-0 origin-top-right mt-2 w-40 shadow-xl rounded z-50">
                <ul class="list-none bg-gray-900 px-2 py-2 rounded-2xl">
                    <li @click="action('auction.resolve'), active = false" class="cursor-pointer py-1 rounded-2xl text-gray-200 hover:bg-gray-800 text-center">Resolve</li>
                    <li @click="action('auction.cancel'), active = false" class="cursor-pointer py-1 rounded-2xl text-gray-200 hover:bg-gray-800 text-center">Cancel</li>
                    <li x-cloak x-show="$store.pool.creator == Alpine.store('publicKey')" @click="action('auction.deposit'), active = false" class="cursor-pointer py-1 rounded-2xl text-gray-200 hover:bg-gray-800 text-center">Deposit</li>
                    <li x-cloak x-show="$store.pool.creator == Alpine.store('publicKey')" @click="action('auction.close'), active = false" class="cursor-pointer py-1 rounded-2xl text-gray-200 hover:bg-gray-800 text-center">Close</li>
                </ul>
            </div>
        </div>
        <p x-cloak x-show="$store.pool.description" class="font-ligh pt-1 flex text-gray-200" x-text="$store.pool.description"></p>
    </div>
    <div class="flex flex-wrap">
        <div class="w-full mb-4 text-white">
            <div x-cloak x-show="$store.pool.tokenPreview && $store.pool.tokenPreview.preview" class="text-center rounded-2xl bg-gray-900 flex justify-center bg-center bg-cover relative mb-6" style="background-image: url(/media/pattern01.jpeg)">
                <div class="w-full lg:w-3/5 lg:py-8 z-40">
                    <img class="rounded-2xl w-full object-center object-cover shadow-4xl" :src="$store.pool.tokenPreview ? $store.pool.tokenPreview.preview : Constants.pixel" onerror="this.remove()">
                </div>
                <div class="bg-gradient-to-r from-black via-gray-800 to-black opacity-90 w-full h-full absolute rounded-2xl z-10"></div>
            </div>

            <div class="border-b border-gray-800 pb-2 mb-2">
                <p x-cloak x-show="$store.pool.tokenPreview && $store.pool.tokenPreview.name" class="text-xl my-2 text-gray-200 font-normal text-white" x-text="$store.pool.tokenPreview ? $store.pool.tokenPreview.name : ''"></p>
                <p x-cloak x-show="$store.pool.tokenPreview && $store.pool.tokenPreview.description" class="font-ligh pb-2 flex text-gray-200" x-text="$store.pool.tokenPreview ? $store.pool.tokenPreview.description : ''"></p>
            </div>

            <p x-cloak x-show="$store.pool.xetaTarget" class="text-xl font-light mb-2 pb-2 border-b border-gray-800 flex justify-between">
                <span class="text-gray-400 font-normal mr-4">Target Bid</span>
                <span x-html="Wrap.xeta($store.pool.xetaTarget, 2)"></span>
            </p>
            <p x-cloak x-show="$store.pool.xetaLimit" class="text-xl font-light mb-2 pb-2 border-b border-gray-800 flex justify-between">
                <span class="text-gray-400 font-normal mr-4">Instant-Buy Bid</span>
                <span x-html="Wrap.xeta($store.pool.xetaLimit, 2)"></span>
            </p>
            <p class="text-xl font-light mb-2 pb-2 border-b border-gray-800 flex justify-between">
                <span class="text-gray-400 font-normal mr-4">Highest Bid</span>
                <span x-html="Wrap.xeta($store.pool.meta && $store.pool.meta.leaderBid || 0, 2)"></span>
            </p>
            <p class="text-xl font-light mb-2 pb-2 border-b border-gray-800 flex justify-between">
                <span class="text-gray-400 font-normal mr-4">Highest Bidder</span>
                <span x-cloak x-show="$store.pool.leader" x-html="Wrap.address($store.pool.leader)" class="truncate"></span>
                <span x-cloak x-show="!$store.pool.leader">None</span>
            </p>
            <p class="text-xl font-light mb-2 flex justify-between">
                <span class="text-gray-400 font-normal mr-4">Expires</span>
                <span x-text="$store.pool.closed ? 'Closed' : $store.pool.expires ? $store.pool.timer : 'Never'" class="truncate"></span>
            </p>
        </div>
    </div>
</div>
    <script>
function launchPool() {
    return {
        init() {
            var self = this
            document.addEventListener('resourceLoaded', function (e) {
                var p = Alpine.store('pool')
                Alpine.store('pool').supply = (p.meta && p.meta.launchBalance || 0)/(p.tokenPreview && p.tokenPreview.supply || 0)
            })
        },
    }
}
</script>
<div x-cloak x-show="$store.pool.program == 'launch'" x-data="launchPool" class="bg-black rounded-2xl px-6 py-4 mb-4 lg:mb-12 section">
    <div class="w-full flex flex-wrap justify-between items-center mb-4">
        <p class="text-2xl font-medium py-2 text-white w-full lg:w-3/4" x-text="$store.pool.name ? $store.pool.name+' (Launch Pool)' : 'Launch Pool'"></p>
        <div x-data="{active: false}" class="w-full lg:w-1/4 flex relative">
            <span @click="open ? action('launch.transfer') : action('launch.claim')" class="w-5/6 cursor-pointer text-white py-2 pl-8 rounded-2xl rounded-r-none text-center bg-pink-700 hover:bg-pink-900 text-lg font-medium transition-all" x-text="open ? 'Participate' : 'Claim'"></span>
            <span @click="active = !active" class="w-1/6 cursor-pointer text-white py-2 rounded-2xl rounded-l-none text-center bg-pink-800 hover:bg-pink-900 text-lg font-medium transition-all">
                <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="currentColor" class="mx-auto mt-1" viewBox="0 0 16 16">
                  <path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/>
                </svg>
            </span>
            <div x-cloak x-show="active" @click.away="active = false" class="absolute right-0 origin-top-right mt-2 w-40 shadow-xl rounded z-50">
                <ul class="list-none bg-gray-900 px-2 py-2 rounded-2xl">
                    <li @click="action('launch.resolve'), active = false" class="cursor-pointer py-1 rounded-2xl text-gray-200 hover:bg-gray-800 text-center">Resolve</li>
                    <li @click="action('launch.claim'), active = false" class="cursor-pointer py-1 rounded-2xl text-gray-200 hover:bg-gray-800 text-center">Claim</li>
                    <li x-cloak x-show="$store.pool.creator == Alpine.store('publicKey')" @click="action('launch.deposit'), active = false" class="cursor-pointer py-1 rounded-2xl text-gray-200 hover:bg-gray-800 text-center">Deposit</li>
                    <li x-cloak x-show="$store.pool.creator == Alpine.store('publicKey')" @click="action('launch.withdraw'), active = false" class="cursor-pointer py-1 rounded-2xl text-gray-200 hover:bg-gray-800 text-center">Withdraw</li>
                    <li x-cloak x-show="$store.pool.creator == Alpine.store('publicKey')" @click="action('launch.close'), active = false" class="cursor-pointer py-1 rounded-2xl text-gray-200 hover:bg-gray-800 text-center">Close</li>
                </ul>
            </div>
        </div>
        <p x-cloak x-show="$store.pool.description" class="font-ligh pt-1 flex text-gray-200" x-text="$store.pool.description"></p>
    </div>
    <div class="flex flex-wrap">
        <div class="w-full mb-4 text-white">
            <div class="text-center border-2 mb-8 rounded-2xl border-gray-800 py-4 px-4 bg-gray-900">
                <p class="text-3xl text-white py-4 tracking-wider">
                    <span x-text="formatNumber($store.pool.xetaTurnover || 0)"></span>
                    <span x-text="' out of '+formatNumber($store.pool.xetaLimit || 0)+' XETA raised'"></span>
                </p>
            </div>
            <p class="text-xl font-light mb-2 pb-2 border-b border-gray-800 flex justify-between">
                <span class="text-gray-400 font-normal mr-4">Allocated Launch Tokens</span>
                <span x-html="Wrap.amount($store.pool.meta && $store.pool.meta.launchBalance || 0, $store.pool.token, $store.pool.tokenPreview)"></span>
            </p>
            <p class="text-xl font-light mb-2 pb-2 border-b border-gray-800 flex justify-between">
                <span class="text-gray-400 font-normal mr-4">Total Token Supply</span>
                <span x-html="$store.pool.tokenPreview && $store.pool.tokenPreview.supply ? Wrap.amount($store.pool.tokenPreview.supply, $store.pool.token, $store.pool.tokenPreview) : 'None'"></span>
            </p>
            <p class="text-xl font-light mb-2 pb-2 border-b border-gray-800 flex justify-between">
                <span class="text-gray-400 font-normal mr-4">Allocations</span>
                <span class="flex flex-col text-right">
                    <span x-text="'50% Launch ('+formatNumber(0.5*$store.pool.supply*100, 2)+'% of total supply)'"></span>
                    <span x-text="formatNumber(($store.pool.percentage || 1)*100*0.5, 2)+'% Liquidity ('+formatNumber(($store.pool.percentage || 1)*0.5*$store.pool.supply*100, 2)+'% of total supply)'"></span>
                    <span x-cloak x-show="$store.pool.percentage && $store.pool.percentage != 1" x-text="formatNumber((1-($store.pool.percentage || 1))*100*0.5, 2)+'% Creator ('+formatNumber((1-($store.pool.percentage || 1))*0.5*$store.pool.supply*100, 2)+'% of total supply)'"></span>
                </span>
            </p>
            <p class="text-xl font-light mb-2 pb-2 border-b border-gray-800 flex justify-between">
                <span class="text-gray-400 font-normal mr-4">Min/Max Contribution</span>
                <span x-html="formatNumber($store.pool.minAmount || 0, 8)+' to '+formatNumber($store.pool.maxAmount || Infinity, 8)+' '+Wrap.xeta(null)"></span>
            </p>
            <p class="text-xl font-light mb-2 pb-2 border-b border-gray-800 flex justify-between">
                <span class="text-gray-400 font-normal mr-4">Funds Raised</span>
                <span x-html="Wrap.xeta($store.pool.xetaTurnover || 0)"></span>
            </p>
            <p class="text-xl font-light mb-2 pb-2 border-b border-gray-800 flex justify-between">
                <span class="text-gray-400 font-normal mr-4">Current Participants</span>
                <span x-text="formatNumber($store.pool.transfersCount || 0)"></span>
            </p>
            <p class="text-xl font-light mb-2 pb-2 border-b border-gray-800 flex justify-between">
                <span class="text-gray-400 font-normal mr-4">XETA Soft Cap</span>
                <span x-html="Wrap.xeta($store.pool.xetaTarget || 0)"></span>
            </p>
            <p class="text-xl font-light mb-2 pb-2 border-b border-gray-800 flex justify-between">
                <span class="text-gray-400 font-normal mr-4">XETA Hard Cap</span>
                <span x-html="Wrap.xeta($store.pool.xetaLimit || 0)"></span>
            </p>
            <p x-cloak x-show="$store.pool.xetaTarget" class="text-xl font-light mb-2 pb-2 border-b border-gray-800 flex justify-between">
                <span class="text-gray-400 font-normal mr-4">Launch Rate</span>
                <span x-cloak x-show="$store.pool.rate" x-text="formatNumber($store.pool.rate, 8)+' '+($store.pool.tokenPreview && $store.pool.tokenPreview.symbol ? $store.pool.tokenPreview.symbol : 'Tokens')+' per XETA'"></span>
            </p>
            <p class="text-xl font-light mb-2 flex justify-between">
                <span class="text-gray-400 font-normal mr-4">Expires</span>
                <span x-text="$store.pool.closed ? 'Closed' : $store.pool.expires ? $store.pool.timer : 'Never'" class="truncate"></span>
            </p>
        </div>
    </div>
</div>
    <div x-cloak x-show="$store.pool.program == 'lending'" x-data class="bg-black rounded-2xl px-6 py-4 mb-4 lg:mb-12 section">
    <div class="w-full flex flex-wrap justify-between items-center mb-4">
        <p class="text-2xl font-medium py-2 text-white w-full lg:w-3/4" x-text="$store.pool.name ? $store.pool.name+' (Lending Pool)' : 'Lending Pool'"></p>
        <div x-data="{active: false}" class="w-full lg:w-1/4 flex relative">
            <span @click="action('lending.transfer')" class="w-5/6 cursor-pointer text-white py-2 pl-8 rounded-2xl rounded-r-none text-center bg-pink-700 hover:bg-pink-900 text-lg font-medium transition-all">Borrow</span>
            <span @click="active = !active" class="w-1/6 cursor-pointer text-white py-2 rounded-2xl rounded-l-none text-center bg-pink-800 hover:bg-pink-900 text-lg font-medium transition-all">
                <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="currentColor" class="mx-auto mt-1" viewBox="0 0 16 16">
                  <path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/>
                </svg>
            </span>
            <div x-cloak x-show="active" @click.away="active = false" class="absolute right-0 origin-top-right mt-2 w-40 shadow-xl rounded z-50">
                <ul class="list-none bg-gray-900 px-2 py-2 rounded-2xl">
                    <li @click="action('lending.settle'), active = false" class="cursor-pointer py-1 rounded-2xl text-gray-200 hover:bg-gray-800 text-center">Settle</li>
                    <li @click="action('lending.liquidate'), active = false" class="cursor-pointer py-1 rounded-2xl text-gray-200 hover:bg-gray-800 text-center">Liquidate</li>
                    <li @click="action('lending.deposit'), active = false" class="cursor-pointer py-1 rounded-2xl text-gray-200 hover:bg-gray-800 text-center">Deposit</li>
                    <li @click="action('lending.withdraw'), active = false" class="cursor-pointer py-1 rounded-2xl text-gray-200 hover:bg-gray-800 text-center">Withdraw</li>
                </ul>
            </div>
        </div>
        <p x-cloak x-show="$store.pool.description" class="font-ligh pt-1 flex text-gray-200" x-text="$store.pool.description"></p>
    </div>
    <div class="flex flex-wrap">
        <div class="w-full mb-4 text-white">
            <div class="text-center border-2 mb-8 rounded-2xl border-gray-800 py-4 px-4 bg-gray-900">
                <p class="text-3xl text-white py-4 tracking-wider">
                    <span x-html="Wrap.amount($store.pool.tokenBalance, $store.pool.token, $store.pool.tokenPreview)"></span>
                    <span>Available to Borrow</span>
                </p>
            </div>
            <p class="text-xl font-light mb-2 pb-2 border-b border-gray-800 flex justify-between">
                <span class="text-gray-400 font-normal mr-4">Min/Max Borrow-Amount</span>
                <span>
                    <span x-text="formatNumber($store.pool.minAmount || 0, 8)"></span>
                    <span>to</span>
                    <span x-text="formatNumber($store.pool.maxAmount || $store.pool.tokenBalance, 4)"></span>
                    <span x-text="$store.pool.tokenPreview && $store.pool.tokenPreview.symbol || ''"></span>
                </span>
            </p>
            <p class="text-xl font-light mb-2 pb-2 border-b border-gray-800 flex justify-between">
                <span class="text-gray-400 font-normal mr-4">Minimum Collateralization</span>
                <span x-text="$store.pool.percentage+'x'"></span>
            </p>
            <p class="text-xl font-light mb-2 pb-2 border-b border-gray-800 flex justify-between">
                <span class="text-gray-400 font-normal mr-4">Yearly Interest Rate</span>
                <span x-text="(parseFloat($store.pool.rate || 0)*100).toFixed(2)+'%'"></span>
            </p>
            <p class="text-xl font-light mb-2 pb-2 border-b border-gray-800 flex justify-between">
                <span class="text-gray-400 font-normal mr-4">Liquidation Fee</span>
                <span x-text="(parseFloat($store.pool.rate || 0)*100).toFixed(2)+'%'"></span>
            </p>
            <p class="text-xl font-light mb-2 pb-2 border-b border-gray-800 flex justify-between">
                <span class="text-gray-400 font-normal mr-4">Total Turnover</span>
                <span x-html="Wrap.amount($store.pool.tokenTurnover, $store.pool.token, $store.pool.tokenPreview)"></span>
            </p>
            <p class="text-xl font-light mb-2 pb-2 border-b border-gray-800 flex justify-between">
                <span class="text-gray-400 font-normal mr-4">Pool Collateral</span>
                <span x-html="Wrap.xeta($store.pool.xetaBalance)"></span>
            </p>
            <p class="text-xl font-light mb-2 flex justify-between">
                <span class="text-gray-400 font-normal mr-4">Expires</span><span></span>
                <span x-text="$store.pool.closed ? 'Closed' : $store.pool.expires ? $store.pool.timer : 'Never'" class="truncate"></span>
            </p>
        </div>
    </div>
</div>
    <div x-cloak x-show="$store.pool.program == 'lock'" x-data class="bg-black rounded-2xl px-6 py-4 mb-4 lg:mb-12 section">
    <div class="w-full flex flex-wrap justify-between items-center mb-4">
        <p class="text-2xl font-medium py-2 text-white w-full lg:w-3/4" x-text="$store.pool.name ? $store.pool.name+' (Lock Pool)' : 'Lock Pool'"></p>
        <div x-data="{active: false}" class="w-full lg:w-1/4 flex relative">
            <span @click="action('lock.transfer')" class="w-5/6 cursor-pointer text-white py-2 pl-8 rounded-2xl rounded-r-none text-center bg-pink-700 hover:bg-pink-900 text-lg font-medium transition-all">Lock</span>
            <span @click="active = !active" class="w-1/6 cursor-pointer text-white py-2 rounded-2xl rounded-l-none text-center bg-pink-800 hover:bg-pink-900 text-lg font-medium transition-all">
                <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="currentColor" class="mx-auto mt-1" viewBox="0 0 16 16">
                  <path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/>
                </svg>
            </span>
            <div x-cloak x-show="active" @click.away="active = false" class="absolute right-0 origin-top-right mt-2 w-40 shadow-xl rounded z-50">
                <ul class="list-none bg-gray-900 px-2 py-2 rounded-2xl">
                    <li @click="action('lock.claim'), active = false" class="cursor-pointer py-1 rounded-2xl text-gray-200 hover:bg-gray-800 text-center">Claim</li>
                </ul>
            </div>
        </div>
        <p x-cloak x-show="$store.pool.description" class="font-ligh pt-1 flex text-gray-200" x-text="$store.pool.description"></p>
    </div>
    <div class="flex flex-wrap">
        <div class="w-full mb-4 text-white">
            <div class="text-center border-2 mb-8 rounded-2xl border-gray-800 py-4 px-4 bg-gray-900">
                <p class="text-3xl text-white py-4 tracking-wider">
                    <span x-html="Wrap.amount($store.pool.tokenBalance, $store.pool.token, $store.pool.tokenPreview)"></span>
                    <span>Locked</span>
                </p>
            </div>
            <p class="text-xl font-light mb-2 pb-2 border-b border-gray-800 flex justify-between">
                <span class="text-gray-400 font-normal mr-4">Min/Max Lock-Amount</span>
                <span>
                    <span x-text="formatNumber($store.pool.minAmount || 0, 8)"></span>
                    <span>to</span>
                    <span x-text="formatNumber($store.pool.maxAmount || Infinity, 8)"></span>
                    <span x-text="$store.pool.tokenPreview && $store.pool.tokenPreview.symbol || ''"></span>
                </span>
            </p>
            <p class="text-xl font-light mb-2 pb-2 border-b border-gray-800 flex justify-between">
                <span class="text-gray-400 font-normal mr-4">Min/Max Lock-Time</span>
                <span>
                    <span x-text="$store.pool.minTime ? formatTime(parseInt($store.pool.minTime*1000)+Date.now(), false) : '1 day'"></span>
                    <span>to</span>
                    <span x-text="$store.pool.maxTime ? formatTime(parseInt($store.pool.maxTime*1000)+Date.now(), false) : 'Unlimited'"></span>
                </span>
            </p>
            <p class="text-xl font-light mb-2 pb-2 border-b border-gray-800 flex justify-between">
                <span class="text-gray-400 font-normal mr-4">Total Locks</span>
                <span x-text="formatNumber($store.pool.transfersCount || 0)" class="truncate"></span>
            </p>
        </div>
    </div>
</div>
    <div x-cloak x-show="$store.pool.program == 'loot'" x-data class="bg-black rounded-2xl px-6 py-4 mb-4 lg:mb-12 section">
    <div class="w-full flex flex-wrap justify-between items-center mb-4">
        <p class="text-2xl font-medium py-2 text-white w-full lg:w-3/4" x-text="$store.pool.name ? $store.pool.name+' (Loot Pool)' : 'Loot Pool'"></p>
        <div x-data="{active: false}" class="w-full lg:w-1/4 flex relative">
            <span @click="action('loot.transfer')" class="w-5/6 cursor-pointer text-white py-2 pl-8 rounded-2xl rounded-r-none text-center bg-pink-700 hover:bg-pink-900 text-lg font-medium transition-all">Participate</span>
            <span @click="active = !active" class="w-1/6 cursor-pointer text-white py-2 rounded-2xl rounded-l-none text-center bg-pink-800 hover:bg-pink-900 text-lg font-medium transition-all">
                <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="currentColor" class="mx-auto mt-1" viewBox="0 0 16 16">
                  <path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/>
                </svg>
            </span>
            <div x-cloak x-show="active && $store.pool.creator == Alpine.store('publicKey')" @click.away="active = false" class="absolute right-0 origin-top-right mt-2 w-40 shadow-xl rounded z-50">
                <ul class="list-none bg-gray-900 px-2 py-2 rounded-2xl">
                    <li x-cloak x-show="$store.pool.creator == Alpine.store('publicKey')" @click="action('loot.deposit'), active = false" class="cursor-pointer py-1 rounded-2xl text-gray-200 hover:bg-gray-800 text-center">Deposit</li>
                    <li x-cloak x-show="$store.pool.creator == Alpine.store('publicKey')" @click="action('loot.withdraw'), active = false" class="cursor-pointer py-1 rounded-2xl text-gray-200 hover:bg-gray-800 text-center">Withdraw</li>
                    <li x-cloak x-show="$store.pool.creator == Alpine.store('publicKey')" @click="action('loot.clear'), active = false" class="cursor-pointer py-1 rounded-2xl text-gray-200 hover:bg-gray-800 text-center">Clear</li>
                </ul>
            </div>
        </div>
        <p x-cloak x-show="$store.pool.description" class="font-ligh pt-1 flex text-gray-200" x-text="$store.pool.description"></p>
    </div>
    <div class="flex flex-wrap">
        <div class="w-full mb-4 text-white">          
            <p class="text-xl mb-4 text-gray-400 font-normal">Participate to win a random NFT.</p>
            <div class="text-center border-2 mb-8 rounded-2xl border-gray-800 py-4 px-4 bg-gray-900">
                <p class="text-3xl text-white py-4 tracking-wider">
                    <span x-text="(parseFloat($store.pool.percentage || 1)*100).toFixed(2)+'%'"></span>
                    <span>Win Probability</span>
                </p>
            </div>
            <p class="text-xl font-light mb-2 pb-2 border-b border-gray-800 flex justify-between">
                <span class="text-gray-400 font-normal mr-4">Cost to Enter</span>
                <span x-html="Wrap.amount($store.pool.minAmount || 0, $store.pool.token, $store.pool.tokenPreview)"></span>
            </p>
            <p class="text-xl font-light mb-2 pb-2 border-b border-gray-800 flex justify-between">
                <span class="text-gray-400 font-normal mr-4">Remaining Loot</span>
                <span x-html="formatNumber($store.pool.meta && $store.pool.meta.lootBalance || 0)"></span>
            </p>
            <p class="text-xl font-light mb-2 pb-2 border-b border-gray-800 flex justify-between">
                <span class="text-gray-400 font-normal mr-4">Win Probability</span>
                <span x-text="(parseFloat($store.pool.percentage || 1)*100).toFixed(2)+'%'"></span>
            </p>
            <p class="text-xl font-light mb-2 pb-2 border-b border-gray-800 flex justify-between">
                <span class="text-gray-400 font-normal mr-4">Previous Participants</span>
                <span x-text="formatNumber($store.pool.transfersCount || 0)"></span>
            </p>
            <p class="text-xl font-light mb-2 pb-2 border-b border-gray-800 flex justify-between">
                <span class="text-gray-400 font-normal mr-4">Previous Winners</span>
                <span x-text="formatNumber($store.pool.claimsCount || 0)"></span>
            </p>
        </div>
    </div>
</div>
    <div x-cloak x-show="$store.pool.program == 'lottery'" x-data class="bg-black rounded-2xl px-6 py-4 mb-4 lg:mb-12 section">
    <div class="w-full flex flex-wrap justify-between items-center mb-4">
        <p class="text-2xl font-medium py-2 text-white w-full lg:w-3/4" x-text="$store.pool.name ? $store.pool.name+' (Lottery Pool)' : 'Lottery Pool'"></p>
        <div x-data="{active: false}" class="w-full lg:w-1/4 flex relative">
            <span @click="open ? action('lottery.transfer') : action('lottery.claim')" class="w-5/6 cursor-pointer text-white py-2 pl-8 rounded-2xl rounded-r-none text-center bg-pink-700 hover:bg-pink-900 text-lg font-medium transition-all" x-text="open ? 'Participate' : 'Claim'"></span>
            <span @click="active = !active" class="w-1/6 cursor-pointer text-white py-2 rounded-2xl rounded-l-none text-center bg-pink-800 hover:bg-pink-900 text-lg font-medium transition-all">
                <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="currentColor" class="mx-auto mt-1" viewBox="0 0 16 16">
                  <path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/>
                </svg>
            </span>
            <div x-cloak x-show="active" @click.away="active = false" class="absolute right-0 origin-top-right mt-2 w-40 shadow-xl rounded z-50">
                <ul class="list-none bg-gray-900 px-2 py-2 rounded-2xl">
                    <li @click="action('lottery.claim'), active = false" class="cursor-pointer py-1 rounded-2xl text-gray-200 hover:bg-gray-800 text-center">Claim</li>
                    <li @click="action('lottery.resolve'), active = false" class="cursor-pointer py-1 rounded-2xl text-gray-200 hover:bg-gray-800 text-center">Resolve</li>
                    <li x-cloak x-show="$store.pool.creator == Alpine.store('publicKey')" @click="action('lottery.deposit'), active = false" class="cursor-pointer py-1 rounded-2xl text-gray-200 hover:bg-gray-800 text-center">Deposit</li>
                    <li x-cloak x-show="$store.pool.creator == Alpine.store('publicKey')" @click="action('lottery.withdraw'), active = false" class="cursor-pointer py-1 rounded-2xl text-gray-200 hover:bg-gray-800 text-center">Withdraw</li>
                    <li x-cloak x-show="$store.pool.creator == Alpine.store('publicKey')" @click="action('lottery.close'), active = false" class="cursor-pointer py-1 rounded-2xl text-gray-200 hover:bg-gray-800 text-center">Close</li>
                    <li x-cloak x-show="$store.pool.creator == Alpine.store('publicKey')" @click="action('lottery.clear'), active = false" class="cursor-pointer py-1 rounded-2xl text-gray-200 hover:bg-gray-800 text-center">Clear</li>
                </ul>
            </div>
        </div>
        <p x-cloak x-show="$store.pool.description" class="font-ligh pt-1 flex text-gray-200" x-text="$store.pool.description"></p>
    </div>
    <div class="flex flex-wrap">
        <div class="w-full mb-4 text-white">
            <p class="text-xl mb-4 text-gray-400 font-normal">Pool currently holds:</p>
            
            <div x-cloak x-show="$store.pool.mechanism == 'ft'" class="text-center border-2 mb-8 rounded-2xl border-gray-800 py-4 px-4 bg-gray-900">
                <p class="text-3xl text-white py-4 tracking-wider">
                    <span x-html="Wrap.amount($store.pool.meta && $store.pool.meta.lotteryBalance || 0, $store.pool.token, $store.pool.tokenPreview)"></span>
                </p>
            </div>

            <div class="$store.pool.mechanism = 'nft'">
                <div x-cloak x-show="$store.pool.tokenPreview && $store.pool.tokenPreview.preview" class="text-center rounded-2xl bg-gray-900 flex justify-center bg-center bg-cover relative mb-6" style="background-image: url(/media/pattern01.jpeg)">
                    <div class="w-full lg:w-1/2 lg:py-8 z-50">
                        <img class="rounded-2xl w-full object-center object-cover shadow" :src="$store.pool.tokenPreview ? $store.pool.tokenPreview.preview : Constants.pixel" onerror="this.remove()">
                    </div>
                    <div class="bg-black opacity-50 w-full h-full absolute rounded-2xl z-10"></div>
                </div>

                <div x-cloak x-show="$store.pool.mechanism == 'nft'" class="border-b border-gray-800 pb-2 mb-2">
                    <p x-cloak x-show="$store.pool.tokenPreview && $store.pool.tokenPreview.name" class="text-xl my-2 text-gray-200 font-normal text-white" x-text="$store.pool.tokenPreview ? $store.pool.tokenPreview.name : ''"></p>
                    <p x-cloak x-show="$store.pool.tokenPreview && $store.pool.tokenPreview.description" class="font-ligh pb-2 flex text-gray-200" x-text="$store.pool.tokenPreview ? $store.pool.tokenPreview.description : ''"></p>
                </div>
            </div>

            <p class="text-xl font-light mb-2 pb-2 border-b border-gray-800 flex justify-between">
                <span class="text-gray-400 font-normal mr-4">Cost to Enter</span>
                <span x-html="Wrap.xeta($store.pool.minAmount || 0)"></span>
            </p>
            <p class="text-xl font-light mb-2 pb-2 border-b border-gray-800 flex justify-between">
                <span class="text-gray-400 font-normal mr-4">Number of Winners</span>
                <span x-text="formatNumber($store.pool.claimsLimit || $store.pool.mechanism == 'nft' ? '1' : Infinity)"></span>
            </p>
            <p class="text-xl font-light mb-2 pb-2 border-b border-gray-800 flex justify-between">
                <span class="text-gray-400 font-normal mr-4">Max. Participants</span>
                <span x-text="formatNumber($store.pool.transfersLimit || Infinity)"></span>
            </p>
            <p class="text-xl font-light mb-2 pb-2 border-b border-gray-800 flex justify-between">
                <span class="text-gray-400 font-normal mr-4">Current Amount per Winner</span>
                <span x-html="$store.pool.mechanism == 'nft' ? formatNumber(1) : Wrap.amount(parseFloat($store.pool.tokenBalance)/parseFloat($store.pool.claimsLimit ? ($store.pool.claimsLimit - ($store.pool.claimsCount || 0)) : $store.pool.transfersCount || 1), $store.pool.token, $store.pool.tokenPreview)"></span>
            </p>
            <p class="text-xl font-light mb-2 pb-2 border-b border-gray-800 flex justify-between">
                <span class="text-gray-400 font-normal mr-4">Current Participants</span>
                <span x-text="formatNumber($store.pool.transfersCount || 0)"></span>
            </p>
            <p class="text-xl font-light mb-2 flex justify-between">
                <span class="text-gray-400 font-normal mr-4">Expires</span>
                <span x-text="$store.pool.closed ? 'Closed' : $store.pool.expires ? $store.pool.timer : 'Never'" class="truncate"></span>
            </p>
        </div>
    </div>
</div>
    <div x-cloak x-show="$store.pool.program == 'royalty'" x-data class="bg-black rounded-2xl px-6 py-4 mb-4 lg:mb-12 section">
    <div class="w-full flex flex-wrap justify-between items-center mb-4">
        <p class="text-2xl font-medium py-2 text-white w-full lg:w-3/4" x-text="$store.pool.name ? $store.pool.name+' (Royalty Pool)' : 'Royalty Pool'"></p>
        <div x-data="{active: false}" class="w-full lg:w-1/4 flex relative">
            <span @click="action('royalty.claim')" class="w-5/6 cursor-pointer text-white py-2 pl-8 rounded-2xl rounded-r-none text-center bg-pink-700 hover:bg-pink-900 text-lg font-medium transition-all">Claim Royalties</span>
            <span @click="active = !active" class="w-1/6 cursor-pointer text-white py-2 rounded-2xl rounded-l-none text-center bg-pink-800 hover:bg-pink-900 text-lg font-medium transition-all">
                <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="currentColor" class="mx-auto mt-1" viewBox="0 0 16 16">
                  <path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/>
                </svg>
            </span>
            <div x-cloak x-show="active && $store.pool.creator == Alpine.store('publicKey')" @click.away="active = false" class="absolute right-0 origin-top-right mt-2 w-40 shadow-xl rounded z-50">
                <ul class="list-none bg-gray-900 px-2 py-2 rounded-2xl">
                    <li x-cloak x-show="$store.pool.creator == Alpine.store('publicKey')" @click="action('royalty.deposit'), active = false" class="cursor-pointer py-1 rounded-2xl text-gray-200 hover:bg-gray-800 text-center">Deposit</li>
                    <li x-cloak x-show="$store.pool.creator == Alpine.store('publicKey')" @click="action('royalty.withdraw'), active = false" class="cursor-pointer py-1 rounded-2xl text-gray-200 hover:bg-gray-800 text-center">Withdraw</li>
                    <li x-cloak x-show="$store.pool.creator == Alpine.store('publicKey')" @click="action('royalty.close'), active = false" class="cursor-pointer py-1 rounded-2xl text-gray-200 hover:bg-gray-800 text-center">Close</li>
                </ul>
            </div>
        </div>
        <p x-cloak x-show="$store.pool.description" class="font-ligh pt-1 flex text-gray-200" x-text="$store.pool.description"></p>
    </div>
    <div class="flex flex-wrap">
        <div class="w-full mb-4 text-white">
            <p class="text-xl mb-4 text-gray-400 font-normal">Hold NFTs by the following creator and receive:</p>
            <div class="text-center border-2 mb-8 rounded-2xl border-gray-800 py-4 px-4 bg-gray-900">
                <p class="text-3xl text-white py-4 tracking-wider">
                    <span x-html="Wrap.amount($store.pool.rate, $store.pool.token, $store.pool.tokenPreview)"></span>
                    <span>Daily Royalty Rewards</span>
                </p>
            </div>
            <p class="text-xl font-light mb-2 pb-2 border-b border-gray-800 flex justify-between">
                <span class="text-gray-400 font-normal mr-4">Daily Royalty Rate</span>
                <span>
                    <span x-html="Wrap.amount($store.pool.rate, $store.pool.token, $store.pool.tokenPreview)"></span>
                </span>
            </p>
            <p class="text-xl font-light mb-2 pb-2 border-b border-gray-800 flex justify-between">
                <span class="text-gray-400 font-normal mr-4">Rewards Available</span>
                <span>
                    <span x-html="Wrap.amount($store.pool.tokenBalance, $store.pool.token, $store.pool.tokenPreview)"></span>
                </span>
            </p>
            <p class="text-xl font-light mb-2 pb-2 border-b border-gray-800 flex justify-between">
                <span class="text-gray-400 font-normal mr-4">Total Claims</span>
                <span x-text="formatNumber($store.pool.claimsCount || 0)"></span>
            </p>
            <p class="text-xl font-light mb-2 pb-2 border-b border-gray-800 flex justify-between">
                <span class="text-gray-400 font-normal mr-4">Rewards Distributed</span>
                <span x-html="Wrap.amount($store.pool.tokenTurnover, $store.pool.token, $store.pool.tokenPreview)"></span>
            </p>
            <p class="text-xl font-light mb-2 pb-2 border-b border-gray-800 flex justify-between">
                <span class="text-gray-400 font-normal mr-4">Creator/Collection</span>
                <span x-html="Wrap.address($store.pool.creator)" class="truncate"></span>
            </p>
            <p class="text-xl font-light mb-2 pb-2 border-b border-gray-800 flex justify-between">
                <span class="text-gray-400 font-normal mr-4">Allowed Candidates</span>
                <span x-text="$store.pool.candidates && $store.pool.candidates.length ? 'Limited, See in Details' : 'All NFTs by Creator'"></span>
            </p>
            <p class="text-xl font-light mb-2 flex justify-between">
                <span class="text-gray-400 font-normal mr-4">Expires</span><span></span>
                <span x-text="$store.pool.closed ? 'Closed' : $store.pool.expires ? $store.pool.timer : 'Never'" class="truncate"></span>
            </p>
        </div>
    </div>
</div>
    <div x-cloak x-show="$store.pool.program == 'staking'" x-data class="bg-black rounded-2xl px-6 py-4 mb-4 lg:mb-12 section">
    <div class="w-full flex flex-wrap justify-between items-center mb-4">
        <p class="text-2xl font-medium py-2 text-white w-full lg:w-3/4" x-text="$store.pool.name ? $store.pool.name+' (Staking Pool)' : 'Staking Pool'"></p>
        <div x-data="{active: false}" class="w-full lg:w-1/4 flex relative">
            <span @click="action('staking.transfer')" class="w-5/6 cursor-pointer text-white py-2 pl-8 rounded-2xl rounded-r-none text-center bg-pink-700 hover:bg-pink-900 text-lg font-medium transition-all">Stake</span>
            <span @click="active = !active" class="w-1/6 cursor-pointer text-white py-2 rounded-2xl rounded-l-none text-center bg-pink-800 hover:bg-pink-900 text-lg font-medium transition-all">
                <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="currentColor" class="mx-auto mt-1" viewBox="0 0 16 16">
                  <path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/>
                </svg>
            </span>
            <div x-cloak x-show="active" @click.away="active = false" class="absolute right-0 origin-top-right mt-2 w-40 shadow-xl rounded z-50">
                <ul class="list-none bg-gray-900 px-2 py-2 rounded-2xl">
                    <li @click="action('staking.claim'), active = false" class="cursor-pointer py-1 rounded-2xl text-gray-200 hover:bg-gray-800 text-center">Claim</li>
                    <li x-cloak x-show="$store.pool.creator == Alpine.store('publicKey')" @click="action('staking.deposit'), active = false" class="cursor-pointer py-1 rounded-2xl text-gray-200 hover:bg-gray-800 text-center">Deposit</li>
                    <li x-cloak x-show="$store.pool.creator == Alpine.store('publicKey')" @click="action('staking.withdraw'), active = false" class="cursor-pointer py-1 rounded-2xl text-gray-200 hover:bg-gray-800 text-center">Withdraw</li>
                </ul>
            </div>
        </div>
        <p x-cloak x-show="$store.pool.description" class="font-ligh pt-1 flex text-gray-200" x-text="$store.pool.description"></p>
    </div>
    <div class="flex flex-wrap">
        <div class="w-full mb-4 text-white">
            <p class="text-xl mb-4 text-gray-400 font-normal">Stake and receive rewards with an APY as high as:</p>
            <div class="text-center border-2 mb-8 rounded-2xl border-gray-800 py-4 px-4 bg-gray-900">
                <p class="text-3xl text-white py-4 tracking-wider">
                    <span x-text="((parseFloat($store.pool.rate || 0)+parseFloat($store.pool.percentage || 0))*100).toFixed(2)"></span>
                    <span>% APY</span>
                </p>
            </div>
            <p class="text-xl font-light mb-2 pb-2 border-b border-gray-800 flex justify-between">
                <span class="text-gray-400 font-normal mr-4">Min/Max Lock-Amount</span>
                <span>
                    <span x-text="formatNumber($store.pool.minAmount || 0, 8)"></span>
                    <span>to</span>
                    <span x-text="formatNumber($store.pool.maxAmount || Infinity, 8)"></span>
                    <span x-text="$store.pool.tokenPreview && $store.pool.tokenPreview.symbol || ''"></span>
                </span>
            </p>
            <p class="text-xl font-light mb-2 pb-2 border-b border-gray-800 flex justify-between">
                <span class="text-gray-400 font-normal mr-4">Min/Max Lock-Time</span>
                <span>
                    <span x-text="$store.pool.minTime ? formatTime(parseInt($store.pool.minTime*1000)+Date.now(), false) : '1 day'"></span>
                    <span>to</span>
                    <span x-text="$store.pool.maxTime ? formatTime(parseInt($store.pool.maxTime*1000)+Date.now(), false) : 'Unlimited'"></span>
                </span>
            </p>
            <p class="text-xl font-light mb-2 pb-2 border-b border-gray-800 flex justify-between">
                <span class="text-gray-400 font-normal mr-4">APY Rate</span>
                <span x-text="(parseFloat($store.pool.rate || 0)*100).toFixed(2)+'%'"></span>
            </p>
            <p class="text-xl font-light mb-2 pb-2 border-b border-gray-800 flex justify-between">
                <span class="text-gray-400 font-normal mr-4">Bonus APY Rate</span>
                <span x-text="(parseFloat($store.pool.percentage || 0)*100).toFixed(2)+'%'"></span>
            </p>
            <p class="text-xl font-light mb-2 pb-2 border-b border-gray-800 flex justify-between">
                <span class="text-gray-400 font-normal mr-4">Total Value Locked</span>
                <span x-html="Wrap.amount($store.pool.tokenBalance, $store.pool.token, $store.pool.tokenPreview)"></span>
            </p>
            <p class="text-xl font-light mb-2 pb-2 border-b border-gray-800 flex justify-between">
                <span class="text-gray-400 font-normal mr-4">Available Staking Rewards</span>
                <span x-html="Wrap.amount($store.pool.meta && $store.pool.meta.rewardBalance ? $store.pool.meta.rewardBalance : 0, $store.pool.token, $store.pool.tokenPreview)"></span>
            </p>
            <p class="text-xl font-light mb-2 flex justify-between">
                <span class="text-gray-400 font-normal mr-4">Expires</span><span></span>
                <span x-text="$store.pool.closed ? 'Closed' : $store.pool.expires ? $store.pool.timer : 'Never'" class="truncate"></span>
            </p>
        </div>
    </div>
</div>
    <script>
function swapPool() {
    return {
        pool: {},
        token: false,
        exchangeValue: null,
        priceValue: null,
        amount: null,
        interval: '5m',
        candles: {},
        depleted: {},
        address: gup('address'),
        chart: null,
        series: null,
        loading: false,
        init() {
            var self = this
            document.addEventListener('resourceLoaded', function (e) {
                self.pool = Alpine.store('pool')
            })

            this.load()
            this.render()
        },
        exchange(fee=0.015) {
            if (this.amount == null || this.amount == '') this.amount = 0
            var xl = Big(this.pool.xetaBalance ? this.pool.xetaBalance : 0)
            var tl = Big(this.pool.tokenBalance ? this.pool.tokenBalance : 0)
            this.priceValue = xl.div(tl).round(8).toString()

            var k = xl.mul(tl)
            var a = k.div((this.token ? tl : xl).add(this.amount)).sub(this.token ? xl : tl).abs()
            this.exchangeValue = a.sub(a.mul(fee)).toString()
        },
        load(refresh=false) {
            if (this.loading) return
            if (this.depleted[this.interval]) {
                if (refresh) this.plot()
                return
            }

            this.loading = true
            var last = this.candles[this.interval] ? this.candles[this.interval][0] : null            
            var self = this

            Xeta.candle.scanIntervalTokenTime({...(last || {}), ...{interval: this.interval, token: this.address}}).then(function(data) {
                if (!data.length) self.depleted[self.interval] = true
                data = data.sort(function(a, b) {return a.time-b.time}) // Sort asc
                self.candles[self.interval] = data.concat(self.candles[self.interval] ? self.candles[self.interval] : [])
                if (data.length) self.adjust(self.candles[self.interval])
                self.plot()
            selfself.loading = false
            }).catch(function(e) {
                self.loading = false
            })
        },
        plot() {
            var self = this
            setTimeout(function() {
                self.series.setData(self.candles[self.interval])
            }, 0)
        },
        adjust(candles) {
            var previous = null
            candles.forEach(function(c) {
                c.open = previous ? previous.close : c.open
                previous = c
            })
        },
        render() {
            this.chart = LightweightCharts.createChart(document.getElementById('chart'), {
                width: document.getElementById('inner-width').offsetWidth-48,
                height: (document.getElementById('inner-width').offsetWidth-48)/2,
                layout: {
                    backgroundColor: 'rgba(0, 0, 0, 1)',
                    textColor: 'rgba(255, 255, 255, 0.75)',
                },
                grid: {
                    vertLines: {
                        color: 'rgba(255, 255, 255, 0.2)',
                    },
                    horzLines: {
                        color: 'rgba(255, 255, 255, 0.2)',
                    },
                },
                crosshair: {
                    mode: LightweightCharts.CrosshairMode.Normal,
                },
                rightPriceScale: {
                    borderColor: 'rgba(255, 255, 255, 0)',
                },
                timeScale: {
                    borderColor: 'rgba(255, 255, 255, 0)',
                    timeVisible: true,
                    secondsVisible: false,
                    rightOffset: 75,
                },
            })

            this.series = this.chart.addCandlestickSeries()
        }
    }
}
</script>
<script src="https://unpkg.com/lightweight-charts/dist/lightweight-charts.standalone.production.js"></script>
<div x-cloak x-show="$store.pool.program == 'swap'" x-data="swapPool" class="bg-black rounded-2xl px-6 py-4 mb-4 lg:mb-12 section">
    <div class="w-full flex flex-wrap justify-between items-center mb-8">
        <p class="text-2xl font-medium py-2 text-white w-full lg:w-1/4" x-text="$store.pool.tokenPreview && $store.pool.tokenPreview.ticker ? $store.pool.tokenPreview.ticker+'/XETA'+' Swap Pool' : 'Swap Pool'"></p>
        <div x-data="{active: false}" class="w-full lg:w-3/4 justify-end items-center flex relative">
            <input @input="amount = $el.value, exchange(), $store.transfer.amount = $el.value" :placeholder="token ? ($store.pool.tokenPreview ? $store.pool.tokenPreview.symbol : 'Token') : 'XETA'" class="rounded-r-none rounded-2xl focus:outline-none font-light placeholder-gray-400 shadow border-gray-700 border-2 transition-all px-4 py-2 bg-gray-900 focus:bg-gray-800 text-lg text-gray-100 outline-none focus:outline-none h-11 border-r-0" type="number" />
            <span @click="token = !token, exchange(), $store.transfer.token = token ? $store.pool.token : Xeta.config.xetaAddress" class="cursor-pointer text-white text-gray-400 border-gray-700 border-2 border-l-0 border-r-0 py-3 px-4 text-center bg-gray-900 hover:bg-gray-800 transition-all h-11 flex items-center text-lg font-light">
                <span x-html="token ? Wrap.tokenPreview($store.pool.tokenPreview) : Wrap.xetaPreview()"></span>
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="mx-2" viewBox="0 0 16 16">
                  <path fill-rule="evenodd" d="M1 11.5a.5.5 0 0 0 .5.5h11.793l-3.147 3.146a.5.5 0 0 0 .708.708l4-4a.5.5 0 0 0 0-.708l-4-4a.5.5 0 0 0-.708.708L13.293 11H1.5a.5.5 0 0 0-.5.5zm14-7a.5.5 0 0 1-.5.5H2.707l3.147 3.146a.5.5 0 1 1-.708.708l-4-4a.5.5 0 0 1 0-.708l4-4a.5.5 0 1 1 .708.708L2.707 4H14.5a.5.5 0 0 1 .5.5z"/>
                </svg>
                <span x-html="token ? Wrap.xetaPreview() : Wrap.tokenPreview($store.pool.tokenPreview)"></span>
            </span>
            <span @click="action('swap.transfer', {pool: $store.pool.address, token: token ? $store.pool.token : Xeta.config.xetaAddress, amount: amount})" class="w-1/4 cursor-pointer text-white py-2 pl-4 text-center bg-pink-700 hover:bg-pink-900 text-lg font-medium transition-all h-11">Swap</span>
            <span @click="active = !active" class="w-10 cursor-pointer text-white py-2 rounded-2xl rounded-l-none text-center bg-pink-800 hover:bg-pink-900 text-lg font-medium transition-all h-11">
                <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="currentColor" class="mx-auto mt-1" viewBox="0 0 16 16">
                  <path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/>
                </svg>
            </span>
            <div x-cloak x-show="active" @click.away="active = false" class="absolute right-0 origin-top-right mt-2 w-40 shadow-xl rounded z-50">
                <ul class="list-none bg-gray-900 px-2 py-2 rounded-2xl">
                    <li @click="action('swap.deposit'), active = false" class="cursor-pointer py-1 rounded-2xl text-gray-200 hover:bg-gray-800 text-center">Deposit</li>
                    <li @click="action('swap.withdraw'), active = false" class="cursor-pointer py-1 rounded-2xl text-gray-200 hover:bg-gray-800 text-center">Withdraw</li>
                </ul>
            </div>
            <p class="absolute right-0 bottom-0 text-xs text-gray-500 -mb-5">You will receive approximately <span x-html="token ? Wrap.xeta(exchangeValue) : Wrap.amount(exchangeValue, $store.pool.token, $store.pool.tokenPreview)"></span></p>
        </div>
    </div>
    <div class="flex flex-wrap">
        <div class="w-full mb-4 text-white">
            <p x-cloak x-show="$store.pool.name && $store.pool.tokenPreview && $store.pool.tokenPreview.name" x-text="$store.pool.tokenPreview ? $store.pool.tokenPreview.name : ''" class="text-xl mb-4 text-gray-400 font-normal text-white"></p>
            
            <div class="flex flex-wrap justify-between items-center mb-4">
                <p class="text-xl text-gray-400 font-normal">
                    <span x-html="Wrap.tokenPreview($store.pool.tokenPreview, $store.pool.token)+' Price - '"></span>
                    <span x-html="$store.pool.xetaBalance && $store.pool.tokenBalance ? Wrap.xeta(parseFloat($store.pool.xetaBalance)/parseFloat($store.pool.tokenBalance), 8) : 0"></span>
                </p>
                <div x-data="{active: false}" class="relative text-white text-sm">
                    <span @click="active = !active" class="select-none cursor-pointer px-3 py-2 rounded-2xl text-gray-200 hover:bg-gray-800 bg-gray-900">Interval: <span x-text="interval"></span></span>
                    <div x-cloak x-show="active" @click.away="active = false" class="absolute right-0 origin-top-right mt-2 w-32 shadow-xl rounded z-50">
                        <ul class="list-none bg-gray-900 px-2 py-2 rounded-2xl">
                            <li @click="interval = '5m', load(true), active = false" class="cursor-pointer py-1 rounded-2xl text-gray-200 hover:bg-gray-800 text-center">5 minutes</li>
                            <li @click="interval = '1h', load(true), active = false" class="cursor-pointer py-1 rounded-2xl text-gray-200 hover:bg-gray-800 text-center">1 hour</li>
                            <li @click="interval = '4h', load(true), active = false" class="cursor-pointer py-1 rounded-2xl text-gray-200 hover:bg-gray-800 text-center">4 hours</li>
                            <li @click="interval = '1d', load(true), active = false" class="cursor-pointer py-1 rounded-2xl text-gray-200 hover:bg-gray-800 text-center">1 day</li>
                            <li @click="interval = '1w', load(true), active = false" class="cursor-pointer py-1 rounded-2xl text-gray-200 hover:bg-gray-800 text-center">1 week</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="mb-8 rounded-2xl">
                <div id="chart"></div>
            </div>
            <p class="text-xl font-light mb-2 pb-2 border-b border-gray-800 flex justify-between">
                <span class="text-gray-400 font-normal mr-4">Trades</span>
                <span x-text="formatNumber($store.pool.transfersCount || 0)"></span>
            </p>
            <p class="text-xl font-light mb-2 pb-2 border-b border-gray-800 flex justify-between">
                <span class="text-gray-400 font-normal mr-4">Price</span>
                <span x-html="$store.pool.xetaBalance && $store.pool.tokenBalance ? Wrap.xeta(parseFloat($store.pool.xetaBalance)/parseFloat($store.pool.tokenBalance), 8) : 0"></span>
            </p>
            <p class="text-xl font-light mb-2 pb-2 border-b border-gray-800 flex justify-between">
                <span class="text-gray-400 font-normal mr-4">Token Liquidity</span>
                <span x-html="Wrap.amount($store.pool.tokenBalance, $store.pool.token, $store.pool.tokenPreview)"></span>
            </p>
            <p class="text-xl font-light mb-2 pb-2 border-b border-gray-800 flex justify-between">
                <span class="text-gray-400 font-normal mr-4">Token Volume</span>
                <span x-html="Wrap.amount($store.pool.tokenTurnover, $store.pool.token, $store.pool.tokenPreview)"></span>
            </p>
            <p class="text-xl font-light mb-2 pb-2 border-b border-gray-800 flex justify-between">
                <span class="text-gray-400 font-normal mr-4">Xeta Liquidity</span>
                <span x-html="Wrap.xeta($store.pool.xetaBalance)"></span>
            </p>
            <p class="text-xl font-light mb-2 pb-2 border-b border-gray-800 flex justify-between">
                <span class="text-gray-400 font-normal mr-4">Xeta Turnover</span>
                <span x-html="Wrap.xeta($store.pool.xetaTurnover)"></span>
            </p>
        </div>
    </div>
</div>
    <script>
function votePool() {
    return {
        init() {},
        sorted(candidates, meta) {
            if (!meta) return candidates.map(function(c) {return [c, 0]})

            return candidates.map(function(c) {
                var m = meta[Xeta.utils.base58encode(new TextEncoder().encode(c)).slice(-8)]
                if (m) return [c, m.c+m.w]
                else return [c, 0]
            }).sort(function(a, b) {return b[1]-a[1]})
        }
    }
}
</script>
<div x-cloak x-show="$store.pool.program == 'vote'" x-data="votePool" class="bg-black rounded-2xl px-6 py-4 mb-4 lg:mb-12 section">
    <div class="w-full flex flex-wrap justify-between items-center mb-4">
        <p class="text-2xl font-medium py-2 text-white w-full lg:w-3/4" x-text="$store.pool.name ? $store.pool.name+' (Vote Pool)' : 'Vote Pool'"></p>
        <div x-data="{active: false}" class="w-full lg:w-1/4 flex relative justify-end">
            <span x-cloak x-show="!$store.pool.candidates" @click="action('vote.transfer', {amount: 0, number: $store.pool.meta && $store.pool.meta.average || 0})" class="w-5/6 cursor-pointer text-white py-2 pl-8 rounded-2xl rounded-r-none text-center bg-pink-700 hover:bg-pink-900 text-lg font-medium transition-all">Vote</span>
            <span @click="active = !active" :class="{'rounded-l-none': !$store.pool.candidates}" class="w-1/6 cursor-pointer text-white py-2 rounded-2xl text-center bg-pink-800 hover:bg-pink-900 text-lg font-medium transition-all">
                <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="currentColor" class="mx-auto mt-1" viewBox="0 0 16 16">
                  <path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/>
                </svg>
            </span>
            <div x-cloak x-show="active" @click.away="active = false" class="absolute right-0 origin-top-right mt-2 w-40 shadow-xl rounded z-50">
                <ul class="list-none bg-gray-900 px-2 py-2 rounded-2xl">
                    <li @click="action('vote.claim'), active = false" class="cursor-pointer py-1 rounded-2xl text-gray-200 hover:bg-gray-800 text-center">Claim</li>
                    <li @click="action('vote.resolve'), active = false" class="cursor-pointer py-1 rounded-2xl text-gray-200 hover:bg-gray-800 text-center">Resolve</li>
                    <li x-cloak x-show="$store.pool.creator == Alpine.store('publicKey')" @click="action('vote.oracle'), active = false" class="cursor-pointer py-1 rounded-2xl text-gray-200 hover:bg-gray-800 text-center">Oracle</li>
                </ul>
            </div>
        </div>
        <p x-cloak x-show="$store.pool.description" class="font-ligh pt-1 flex text-gray-200" x-text="$store.pool.description"></p>
    </div>
    <div class="flex flex-wrap">
        <div class="w-full mb-4 text-white">
            <div x-cloak x-show="!$store.pool.candidates" class="text-center border-2 mb-8 rounded-2xl border-gray-800 py-4 px-4 bg-gray-900">
                <p class="text-3xl text-white py-4 tracking-wider">
                    <span x-text="'Voting Average: '+($store.pool.meta ? formatNumber($store.pool.meta.average || ($store.pool.meta.sum || 0)/($store.pool.meta.count || 1), 4) : 0)"></span>
                </p>
            </div>
            <div x-cloak x-show="$store.pool.candidates">
                <p class="text-xl mb-4 text-gray-400 font-normal">Vote for one of the following candidates:</p>
                <div class="border-2 mb-8 rounded-2xl border-gray-800 px-4 bg-gray-900">
                    <ul class="list-none flex flex-wrap">
                        <template x-for="candidate in ($store.pool.candidates ? sorted($store.pool.candidates, $store.pool.meta) : [])">
                            <li class="w-full flex justify-between items-center py-2 border-b border-gray-700">
                                <span x-html="candidate[0].slice(0, 4) == 'http' ? Wrap.link(candidate[0]) : (candidate[0].includes(' ') || candidate[0].length < 32 || candidate[0].length > 44) ? candidate[0] : Wrap.address(candidate[0])"></span>
                                <div class="flex items-center">
                                    <span class="text-gray-100" x-text="candidate[1]"></span>
                                    <span @click="action('vote.transfer', {answer: candidate[0], amount: $store.pool.minAmount || 0})" class="ml-4 cursor-pointer text-white py-2 px-4 rounded-2xl text-center bg-pink-700 hover:bg-gray-900 text-lg font-light transition-all">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-arrow-up-circle" viewBox="0 0 16 16">
                                          <path fill-rule="evenodd" d="M1 8a7 7 0 1 0 14 0A7 7 0 0 0 1 8zm15 0A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-7.5 3.5a.5.5 0 0 1-1 0V5.707L5.354 7.854a.5.5 0 1 1-.708-.708l3-3a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 5.707V11.5z"></path>
                                        </svg>
                                    </span>
                                </div>
                            </li>
                        </template>
                    </ul>
                </div>
            </div>

            <p class="text-xl font-light mb-2 pb-2 border-b border-gray-800 flex justify-between">
                <span class="text-gray-400 font-normal mr-4">Min/Max Vote Amount</span>
                <span>
                    <span x-text="formatNumber($store.pool.minAmount || 0, 8)"></span>
                    <span>to</span>
                    <span x-text="formatNumber($store.pool.maxAmount || Infinity, 8)"></span>
                    <span x-text="$store.pool.tokenPreview && $store.pool.tokenPreview.symbol || ''"></span>
                </span>
            </p>
            <p class="text-xl font-light mb-2 pb-2 border-b border-gray-800 flex justify-between">
                <span class="text-gray-400 font-normal mr-4">Total Votes</span>
                <span x-text="formatNumber($store.pool.transfersCount || 0)"></span>
            </p>
            <p class="text-xl font-light mb-2 pb-2 border-b border-gray-800 flex justify-between">
                <span class="text-gray-400 font-normal mr-4">Max. Votes</span>
                <span x-text="formatNumber($store.pool.transfersLimit || Infinity)"></span>
            </p>
            <p class="text-xl font-light mb-2 pb-2 border-b border-gray-800 flex justify-between">
                <span class="text-gray-400 font-normal mr-4">Current Vote Amount</span>
                <span x-html="Wrap.amount($store.pool.tokenBalance || 0, $store.pool.token, $store.pool.tokenPreview)"></span>
            </p>
            <p class="text-xl font-light mb-2 pb-2 border-b border-gray-800 flex justify-between">
                <span class="text-gray-400 font-normal mr-4">Max. Vote Amount</span>
                <span x-html="Wrap.amount($store.pool.tokenLimit || Infinity, $store.pool.token, $store.pool.tokenPreview)"></span>
            </p>
            <p class="text-xl font-light mb-2 pb-2 border-b border-gray-800 flex justify-between">
                <span class="text-gray-400 font-normal mr-4 up">Resolution Mechanism</span>
                <span x-text="$store.pool.mechanism && $store.pool.mechanism.toUpperCase() || 'Unspecified'"></span>
            </p>
            <p class="text-xl font-light mb-2 flex justify-between">
                <span class="text-gray-400 font-normal mr-4">Expires</span><span></span>
                <span x-text="$store.pool.closed ? 'Closed' : $store.pool.expires ? $store.pool.timer : 'Never'" class="truncate"></span>
            </p>
        </div>
    </div>
</div>
</div>
    <script>
function loadDetails() {
    return {
        details: {},
        expanded: !['pool'].includes(Alpine.store('resource')),
        init() {
            var self = this
            document.addEventListener('resourceLoaded', function (e) {
                var data = Alpine.store(Alpine.store('resource'))
                
                if (Alpine.store('resource') == 'address') {
                    if (data.pool) window.location.href = '/pool/?address='+data.pool.address
                    else if (data.token && data.token.address != data.token.creator) window.location.href = '/token/?address='+data.token.address
                    
                    if (data.token) self.expanded = false
                    data = Object.assign({}, data.token, data.balance)
                }

                self.details = formatDetails(data)
            })
        }
    }
}
</script>

<div x-data="loadDetails()">
    <div class="bg-black rounded-2xl px-6 py-4 mb-4 lg:mb-12 section">
        <div @click="expanded = !expanded" class="flex justify-between items-center cursor-pointer select-none">
            <div class="flex justify-start items-center">
                <p class="text-lg py-2 text-gray-100">Details</p>

                <div x-cloak x-show="['token', 'allowance', 'address', 'claim'].includes($store.resource)" x-data="{active: false}" class="relative text-white text-sm ml-2">
                    <span @click.stop="active = !active" class="select-none cursor-pointer px-3 py-2 rounded-2xl text-gray-200 hover:bg-gray-800 bg-gray-900 capitalize text-xs">Action</span>
                    <div x-cloak x-show="active" @click.away="active = false" class="absolute right-0 origin-top-right mt-2 w-32 shadow-xl rounded z-50 select-none">
                        <ul class="list-none bg-gray-900 px-2 py-2 rounded-2xl">
                            <li @click.stop="action($store.resource+'.update'), active = false" class="cursor-pointer py-2 rounded-2xl text-gray-200 hover:bg-gray-800 text-center capitalize text-xs select-none">Update</li>
                            <li x-cloak x-show="$store.resource == 'claim'" @click.stop="action('claim.transfer'), active = false" class="cursor-pointer py-2 rounded-2xl text-gray-200 hover:bg-gray-800 text-center capitalize text-xs select-none">Transfer</li>
                            <li x-cloak x-show="$store.resource == 'claim'" @click.stop="action('claim.resolve'), active = false" class="cursor-pointer py-2 rounded-2xl text-gray-200 hover:bg-gray-800 text-center capitalize text-xs select-none">Resolve</li>
                            <li x-cloak x-show="$store.resource == 'token'" @click.stop="action('transfer.create'), active = false" class="cursor-pointer py-2 rounded-2xl text-gray-200 hover:bg-gray-800 text-center capitalize text-xs select-none">Transfer</li>
                            <li x-cloak x-show="$store.resource == 'token' && $store.token.reserve" @click.stop="action('token.mint'), active = false" class="cursor-pointer py-2 rounded-2xl text-gray-200 hover:bg-gray-800 text-center capitalize text-xs select-none">Mint</li>
                        </ul>
                    </div>
                </div>
            </div>

            
            <span class="cursor-pointer underline text-gray-200 text-sm font-light">
                <span x-text="expanded ? 'Close' : 'Open'">Open</span> Details
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="inline ml-1 -mt-0.5" viewBox="0 0 16 16">
                  <path x-cloak x-show="!expanded" fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/>
                  <path x-cloak x-show="expanded" fill-rule="evenodd" d="M7.646 4.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1-.708.708L8 5.707l-5.646 5.647a.5.5 0 0 1-.708-.708l6-6z"/>
                </svg>
            </span>
        </div>
        <table x-cloak x-show="expanded" class="w-full table-fixed font-light text-sm">
            <thead>
                <tr>
                    <th class="text-gray-400 text-left uppercase w-1/3"></th>
                    <th class="text-gray-400 text-left uppercase w-2/3"></th>
                </tr>
            </thead>
            <tbody>
                <template x-for="[key, value] in Object.entries(details)">
                    <tr class="border-b border-gray-800">
                        <td class="py-2 text-gray-400 capitalize text-sm font-semibold py-2" x-text="key"></td>
                        <td @click="$el.classList.toggle('truncate')" class="text-right text-white truncate break-all py-2 select-none" x-html="value"></td>
                    </tr>
                </template>
            </tbody>
        </table>
    </div>
</div>
    <script>
function addressExplorer() {
    return {
        resource: window.location.hash.substr(1) ? window.location.hash.substr(1) : 'transfers',
        resourceFilter: window.location.hash.substr(1) ? window.location.hash.substr(1) : 'transfers',
        transfersFilter: 'incoming',
        claimsFilter: Alpine.store('resource') == 'address' ? 'holding' : 'issued',
        allowancesFilter: 'spendable',
        transfers: [],
        transfersOutgoing: [],
        transfersIncoming: [],
        transactions: [],
        tokens: [],
        pools: [],
        claims: [],
        claimsIssued: [],
        claimsHolding: [],
        pools: [],
        allowances: [],
        allowancesGranted: [],
        allowancesSpendable: [],
        balances: [],
        address: gup('address'),
        depleted: {},
        loading: false,
        methods: {
            'transfersIncoming': Xeta.transfer.scanToCreated,
            'transfersOutgoing': Xeta.transfer.scanFromCreated,
            'transactions': Xeta.transaction.scanSenderCreated,
            'tokens': Xeta.token.scanOwnerCreated,
            'pools': Xeta.pool.scanCreatorCreated,
            'claimsHolding': Xeta.claim.scanHolderCreated,
            'claimsIssued': Xeta.claim.scanIssuerCreated,
            'balances': Xeta.balance.scanAddressAmount,
            'allowancesGranted': Xeta.allowance.scanAddressCreated,
            'allowancesSpendable': Xeta.allowance.scanSpenderCreated,
        },
        inputs: {
            'transfersIncoming': 'to',
            'transfersOutgoing': 'from',
            'transactions': 'sender',
            'tokens': 'owner',
            'pools': 'creator',
            'claimsHolding': 'holder',
            'claimsIssued': 'issuer',
            'balances': 'address',
            'allowancesGranted': 'address',
            'allowancesSpendable': 'spender',
        },
        init() {
            var self = this
            document.addEventListener('resourceLoaded', function (e) {
                if (Alpine.store('resource') == 'pool' && Alpine.store('pool').program == 'loot') self.resource = 'tokens'

                var address = Alpine.store('address')
                try { if (address.token.meta.default) self.resource = address.token.meta.default } catch (e) {}
                self.change(self.resource)
            })
        },
        change(resource) {
            this.resource = resource
            window.location.hash = resource
            var filter = this[resource+'Filter']
            this.resourceFilter = resource+(filter ? filter[0].toUpperCase()+filter.slice(1) : '')
            this.load(resource)
        },
        load(resource) {
            this[resource] = this[this.resourceFilter]
            var resourceFilter = this.resourceFilter // Static, because this.resourceFilter could change during request
            if (this.loading || this.depleted[resourceFilter]) return
            this.loading = true
            var last = this[resourceFilter].length ? this[resourceFilter].slice(-1)[0] : {}
            var self = this

            this.methods[resourceFilter]({...last, ...{[this.inputs[resourceFilter]]: this.address}}, {preview: true}).then(function(data) {
                if (!data.length) self.depleted[resourceFilter] = true
                self[resourceFilter] = self[resourceFilter].concat(data)
                if (resource != resourceFilter) self[resource] = self[resourceFilter]
                if (resource == 'tokens') Grid.layout(document.getElementById('grid'), document.getElementById('tokens'))
                self.loading = false
            }).catch(function(e) {
                self.loading = false
                if (e.message == 'quota:limited') window.location.href = '/pages/quota'
                else throw e
            })
        },
    }
}
</script>

<div x-data="addressExplorer">
    <div x-cloak x-show="['address', 'pool'].includes($store.resource)" class="bg-black rounded-2xl px-2 pt-2 mb-2 text-sm font-light text-gray-200 section">
        <!-- <div class="flex flex-wrap">
            <template x-for="type in (
                $store.resource == 'address' ? ['transfers', 'balances', 'tokens', 'transactions', 'pools', 'claims', 'allowances'] : $store.resource == 'pool' ? ['transfers', 'balances', 'tokens', 'claims'] : [])">
                <div @click="change(type)" :class="{'border-pink-700': resource == type}" class="inline border-b-4 border-gray-900 hover:border-pink-700 px-4 py-2 cursor-pointer capitalize select-none" x-text="type"></div>
            </template>
        </div> -->
        <div class="flex flex-wrap">
            <template x-for="type in ['transfers', 'balances', 'tokens', 'claims']">
                <div @click="change(type)" :class="{'border-pink-700': resource == type}" class="inline border-b-4 border-gray-900 hover:border-pink-700 px-2 lg:px-4 py-2 cursor-pointer capitalize select-none text-xs lg:text-sm" x-text="type"></div>
            </template>
            <div x-data="{active: false}" class="relative text-xs lg:text-sm">
                <span @click="active = !active" class="block cursor-pointer px-2 lg:px-4 py-2 rounded-2xl text-gray-200 hover:bg-gray-800 select-none">More</span>
                <div x-cloak x-show="active" @click.away="active = false" class="absolute right-0 origin-top-right mt-2 w-32 shadow-xl rounded z-50 select-none">
                    <ul class="list-none bg-gray-900 px-2 py-2 rounded-2xl">
                        <li @click="active = false, change('transactions')" class="cursor-pointer py-1 rounded-2xl text-gray-200 hover:bg-gray-800 text-center select-none">Transactions</li>
                        <li @click="active = false, change('pools')" class="cursor-pointer py-1 rounded-2xl text-gray-200 hover:bg-gray-800 text-center select-none">Pools</li>
                        <li @click="active = false, change('allowances')" class="cursor-pointer py-1 rounded-2xl text-gray-200 hover:bg-gray-800 text-center select-none">Allowances</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <div class="bg-black rounded-2xl py-4 mb-4 lg:mb-12">
        <div class="flex justify-between items-center px-6">
            <p class="text-lg py-2 text-gray-100 capitalize" x-text="resource"></p>
            <div x-cloak x-show="['transfers', 'claims', 'allowances'].includes(resource)" x-data="{active: false}" class="relative text-white text-sm">
                <span @click="active = !active" class="select-none cursor-pointer px-3 py-2 rounded-2xl text-gray-200 hover:bg-gray-800 bg-gray-900 capitalize text-xs select-none" x-text="$data[resource+'Filter']"></span>
                <div x-cloak x-show="active" @click.away="active = false" class="absolute right-0 origin-top-right mt-2 w-32 shadow-xl rounded z-50">
                    <ul class="list-none bg-gray-900 px-2 py-2 rounded-2xl">
                        <template x-for="[key, type] in Object.entries({incoming: 'transfers', outgoing: 'transfers', issued: 'claims', holding: 'claims', granted: 'allowances', spendable: 'allowances'})">
                            <li x-cloak x-show="type == resource" @click="$data[type+'Filter'] = key, change(type), active = false" x-text="key" class="cursor-pointer py-2 rounded-2xl text-gray-200 hover:bg-gray-800 text-center capitalize text-xs select-none"></li>
                        </template>
                    </ul>
                </div>
            </div>
        </div>

        <div x-cloak x-show="resource == 'transfers'"><table class="w-full table-fixed font-light text-sm explorer">
    <thead>
        <tr class="text-gray-400">
            <th class="truncate py-2 pr-4 text-left uppercase w-2/12">Hash</th>
            <th class="truncate py-2 pr-4 text-left uppercase w-2/12">Created</th>
            <th class="truncate py-2 pr-4 text-left uppercase w-2/12">Amount</th>
            <th class="truncate py-2 pr-4 text-left uppercase w-3/12 hidden md:table-cell">From</th>
            <th class="truncate py-2 pr-4 text-left uppercase w-3/12 hidden md:table-cell">To</th>
        </tr>
    </thead>
    <tbody>
        <template x-for="transfer in transfers">
            <tr class="text-white">
                <td class="truncate pr-4 py-2" x-html="Wrap.transfer(transfer.hash)"></td>
                <td class="truncate pr-4 py-2" x-text="formatTime(transfer.created)"></td>
                <td class="truncate pr-4 py-2" x-html="Wrap.amount(transfer.amount, transfer.token, transfer.tokenPreview, 8)"></td>
                <td class="truncate pr-4 py-2 hidden md:table-cell" x-html="Wrap.address(transfer.from)"></td>
                <td class="truncate pr-4 py-2 hidden md:table-cell" x-html="Wrap.address(transfer.to)"></td>
            </tr>
        </template>
    </tbody>
</table></div>
        <div x-cloak x-show="resource == 'balances'"><table class="w-full table-fixed font-light text-sm explorer">
    <thead>
        <tr class="text-gray-400">
            <th class="truncate py-2 pr-4 text-left uppercase w-1/3">Address</th>
            <th class="truncate py-2 pr-4 text-left uppercase w-1/3">Token</th>
            <th class="truncate py-2 pr-4 text-left uppercase w-1/4">Amount</th>
            <th x-cloak x-show="balances.length && balances[0].percentage" class="truncate py-2 pr-4 text-left uppercase w-1/4 hidden md:table-cell">Percent</th>
        </tr>
    </thead>
    <tbody>
        <template x-for="balance in balances">
            <tr class="hover:bg-gray-900 text-white">
                <td class="truncate pr-4 py-2" x-html="Wrap.address(balance.address)"></td>
                <td class="truncate pr-4 py-2" x-html="Wrap.token(balance.token)"></td>
                <td class="truncate pr-4 py-2" x-html="Wrap.amount(balance.amount, balance.token, balance.tokenPreview, 8)"></td>
                <td x-cloak x-show="balance.percentage" class="truncate pr-4 py-2 hidden md:table-cell" x-html="balance.percentage+'%'"></td>
            </tr>
        </template>
    </tbody>
</table></div>
        <div x-cloak x-show="resource == 'transactions'"><table class="w-full table-fixed font-light text-sm explorer">
    <thead>
        <tr class="text-gray-400">
            <th class="truncate py-2 pr-4 text-left uppercase w-5/12">Hash</th>
            <th class="truncate py-2 pr-4 text-left uppercase w-5/12">Sender</th>
            <th class="truncate py-2 pr-4 text-left uppercase w-2/12">Created</th>
        </tr>
    </thead>
    <tbody>
        <template x-for="transaction in transactions">
            <tr class="hover:bg-gray-900 text-white">
                <td class="truncate pr-4 py-2" x-html="Wrap.transaction(transaction.hash)"></td>
                <td class="truncate pr-4 py-2" x-html="Wrap.address(transaction.sender)"></td>
                <td class="truncate pr-4 py-2" x-text="formatTime(transaction.created)"></td>
            </tr>
        </template>
    </tbody>
</table></div>
        <div x-cloak x-show="resource == 'pools'"><table class="w-full table-fixed font-light text-sm explorer">
    <thead>
        <tr class="text-gray-400">
            <th class="truncate py-2 pr-4 text-left uppercase w-4/12">Address</th>
            <th class="truncate py-2 pr-4 text-left uppercase w-3/12 hidden md:table-cell">Name</th>
            <th class="truncate py-2 pr-4 text-left uppercase w-2/12">Balance</th>
            <th class="truncate py-2 pr-4 text-left uppercase w-1/12">Program</th>
            <th class="truncate py-2 pr-4 text-left uppercase w-2/12 hidden md:table-cell">Expires</th>
        </tr>
    </thead>
    <tbody>
        <template x-for="pool in pools">
            <tr class="hover:bg-gray-900 text-white">
                <td class="truncate pr-4 py-2" x-html="Wrap.pool(pool.address)"></td>
                <td class="truncate pr-4 py-2 hidden md:table-cell" x-html="pool.name ? pool.name : 'Unnamed'"></td>
                <td class="truncate pr-4 py-2" x-html="Wrap.amount(pool.tokenBalance, pool.token, pool.tokenPreview, 8)"></td>
                <td class="truncate pr-4 py-2" x-html="pool.program.toUpperCase()"></td>
                <td class="truncate pr-4 py-2 hidden md:table-cell" x-text="pool.expires ? formatTime(pool.expires) : 'Never'"></td>
            </tr>
        </template>
    </tbody>
</table></div>
        <div x-cloak x-show="resource == 'claims'"><table class="w-full table-fixed font-light text-sm explorer">
    <thead>
        <tr class="text-gray-400">
            <th class="truncate py-2 pr-4 text-left uppercase w-2/12">Hash</th>
            <th class="truncate py-2 pr-4 text-left uppercase w-2/12">Amount</th>
            <th class="truncate py-2 pr-4 text-left uppercase w-2/12">Category</th>
            <th class="truncate py-2 pr-4 text-left uppercase w-2/12 hidden md:table-cell">Issuer</th>
            <th class="truncate py-2 pr-4 text-left uppercase w-2/12 hidden md:table-cell">Holder</th>
            <th class="truncate py-2 pr-4 text-left uppercase w-2/12 hidden md:table-cell">Unlocks</th>
            <th class="truncate py-2 pr-4 text-left uppercase w-2/12 hidden md:table-cell">Created</th>
        </tr>
    </thead>
    <tbody>
        <template x-for="claim in claims">
            <tr class="hover:bg-gray-900 text-white">
                <td class="truncate pr-4 py-2" x-html="Wrap.claim(claim.hash)"></td>
                <td class="truncate pr-4 py-2" x-html="Wrap.amount(claim.tokenAmount, claim.token, claim.tokenPreview, 8)"></td>
                <td class="truncate pr-4 py-2" x-html="claim.category ? claim.category : None"></td>
                <td class="truncate pr-4 py-2 hidden md:table-cell" x-html="Wrap.address(claim.creator)"></td>
                <td class="truncate pr-4 py-2 hidden md:table-cell" x-html="Wrap.address(claim.owner)"></td>
                <td class="truncate pr-4 py-2 hidden md:table-cell" x-html="claim.unlocks ? formatTime(claim.unlocks) : 'Unlocked'"></td>
                <td class="truncate pr-4 py-2 hidden md:table-cell" x-html="formatTime(claim.created)"></td>
            </tr>
        </template>
    </tbody>
</table></div>
        <div x-cloak x-show="resource == 'allowances'"><table class="w-full table-fixed font-light text-sm explorer">
    <thead>
        <tr class="text-gray-400">
            <th class="truncate py-2 pr-4 text-left uppercase w-3/12">Hash</th>
            <th class="truncate py-2 pr-4 text-left uppercase w-3/12">Amount</th>
            <th class="truncate py-2 pr-4 text-left uppercase w-3/12">Issuer</th>
            <th class="truncate py-2 pr-4 text-left uppercase w-3/12">Spender</th>
        </tr>
    </thead>
    <tbody>
        <template x-for="allowance in allowances">
            <tr class="hover:bg-gray-900 text-white">
                <td class="truncate pr-4 py-2" x-html="Wrap.allowance(allowance.hash)"></td>
                <td class="truncate pr-4 py-2" x-html="Wrap.amount(allowance.amount, allowance.token, allowance.tokenPreview, 8)"></td>
                <td class="truncate pr-4 py-2" x-html="Wrap.address(allowance.address)"></td>
                <td class="truncate pr-4 py-2" x-html="Wrap.address(allowance.spender)"></td>
            </tr>
        </template>
    </tbody>
</table></div>
        <div x-cloak x-show="resource == 'tokens'"><div id="tokens" class="hidden">
    <template x-for="token in tokens">
        <div class="mx-1.5 mb-4 token">
            <a :href="'/token/?address='+token.address" class="block rounded-2xl bg-gray-900 bg-opacity-80 shadow transform-gpu hover:-translate-y-2 transition-transform duration-300">
                <div class="rounded-2xl rounded-b-none overflow-hidden">
                    <img x-cloak x-show="token.preview" class="h-32 w-full mb-2 object-center object-cover" :src="token.preview ? token.preview : Constants.pixel" onerror="this.remove()">
                </div>
                <div class="px-3 py-3">
                    <p class="text-sm text-white py-0.5 text-center tracking-wider" x-text="token.name"></p>
                    <p class="text-xs text-gray-200 py-0.5 text-center truncate" x-text="token.address"></p>
                </div>
            </a>
        </div>
    </template>
</div>

<div id="grid" class="w-full">
    <div class="columns flex mx-5">
        <div class="column w-1/2 md:w-1/3 lg:w-1/5 block"></div>
        <div class="column w-1/2 md:w-1/3 lg:w-1/5 block"></div>
        <div class="column w-1/2 md:w-1/3 lg:w-1/5 hidden md:block"></div>
        <div class="column w-1/2 md:w-1/3 lg:w-1/5 hidden lg:block"></div>
        <div class="column w-1/2 md:w-1/3 lg:w-1/5 hidden lg:block"></div>
    </div>
</div></div>

        <div x-show="!depleted[resourceFilter] && $data[resourceFilter].length % 25 == 0" class="pt-6 flex justify-center text-sm">
            <span @click="load(resource)" class="cursor-pointer underline w-full text-center text-sm text-gray-100 py-2 hover:bg-gray-900 rounded select-none">Load more</span>
        </div>
    </div>    
</div>

                </div>
            </main>   
            <footer id="page-footer" class="bg-black">
    <div class="container xl:max-w-6xl mx-auto text-center flex justify-between items-center py-4 text-sm xl:max-w-6xl mx-auto px-4 lg:px-8">
        <div class="">
            <span class="font-light">Xeta Reality <script>document.write((new Date).getFullYear());</script></span>
        </div>
        <div class="">
            <a href="https://xetareality.com" target="_blank" class="font-light text-pink-400 hover:text-pink-600 hover:underline">Xeta Reality Website</a>
        </div>
    </div>
</footer>
        </div>

        <script>
function alertModal() {
    return {
        message: null,
        init(message) {
            this.message = message
        }
    }
}
</script>
<div x-cloak name="alertModal" id="alert-modal" x-show.transition.opacity="$store.modal == 'alertModal'" x-data="alertModal" class="z-50 fixed w-full h-full top-0 left-0">
    <div @click="hideModal()" class="backdrop absolute w-full h-full bg-black opacity-75 z-0"></div>

    <div @click="hideModal()" class="relative cursor-pointer flex w-full justify-center py-4 text-white text-sm z-50">
        <svg class="fill-current text-white mt-0.5" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18">
            <path d="M14.53 4.53l-1.06-1.06L9 7.94 4.53 3.47 3.47 4.53 7.94 9l-4.47 4.47 1.06 1.06L9 10.06l4.47 4.47 1.06-1.06L10.06 9z"></path>
        </svg>
        <span class="ml-1">Close</span>
    </div>

    <div class="overflow-scroll max-h-full mx-auto w-full md:w-1/2 pb-32 z-50 relative disable-scrollbar">
        <div class="rounded-3xl shadow w-full relative bg-white px-4 py-4">
            <p class="text-lg text-gray-700 text-center py-4 px-8" x-text="message ? message : ''"></p>
        </div>
    </div>
</div>
        <script>
function walletModal() {
    return {
        selection: null,
        account: null,
        secret: null,
        publicKey: null,
        privateKey: null,
        transacting: false,
        init() {},
        /**
         * Generate keys
         */
        async generateKeys() {
            this.selection = 'generate'
            var keys = await Xeta.crypto.generateKeypair()
            this.publicKey = keys[0]
            this.privateKey = keys[1]
            connectWallet(this.publicKey, this.privateKey)
        },
        /**
         * Create wallet
         */
        async createWallet() {
            if (!this.transacting) {
                var self = this;
                var data = {account: this.account, secret: this.secret}
                Alpine.sstore('account', this.account)
                Alpine.sstore('secret', this.secret)
                this.transacting = true

                Xeta.wallet.managed({account: this.account, secret: this.secret, unsafe: true, create: true}).then(function(data) {
                    self.selection = 'public'
                    self.publicKey = data.publicKey
                    self.secret = null
                    self.transacting = false
                    connectWallet(data.publicKey, data.privateKey)
                }).catch(function(e) {
                    self.transacting = false
                    alert(e)
                })
            }
        },
        /**
         * Init wallet
         */
        async getWallet() {
            if (!this.transacting) {
                var self = this;
                Alpine.sstore('account', this.account)
                Alpine.sstore('secret', this.secret)
                this.transacting = true

                Xeta.wallet.managed({account: this.account, secret: this.secret, unsafe: true}).then(function(data) {
                    self.selection = null
                    self.publicKey = data.publicKey
                    self.secret = null
                    self.transacting = false
                    connectWallet(data.publicKey, data.privateKey)
                    hideModal()
                }).catch(function(e) {
                    self.transacting = false
                    alert(e)
                })
            }
        },
        /**
         * Import keys
         */
        async importKeys() {
            var privateKey = this.privateKey
            this.privateKey = null

            Xeta.crypto.generatePublic(privateKey).then(function(publicKey) {
                connectWallet(publicKey, privateKey)
                hideModal()
            })
        }
    }
}
</script>
<div x-cloak name="walletModal" id="wallet-modal" x-show.transition.opacity="$store.modal == 'walletModal'" x-data="walletModal" class="z-50 fixed w-full h-full top-0 left-0">
    <div @click="hideModal()" class="backdrop absolute w-full h-full bg-black opacity-75 z-0"></div>

    <div @click="hideModal()" class="relative cursor-pointer flex w-full justify-center py-4 text-white text-sm z-50">
        <svg class="fill-current text-white mt-0.5" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18">
            <path d="M14.53 4.53l-1.06-1.06L9 7.94 4.53 3.47 3.47 4.53 7.94 9l-4.47 4.47 1.06 1.06L9 10.06l4.47 4.47 1.06-1.06L10.06 9z"></path>
        </svg>
        <span class="ml-1">Close</span>
    </div>

    <div class="overflow-scroll max-h-full mx-auto w-full md:w-1/2 pb-32 z-50 relative disable-scrollbar">
        <div class="rounded-2xl shadow w-full relative bg-pink-900 px-2 lg:px-8 py-4 bg-top bg-cover" style="background-image: url(/media/background.jpg)">
            <div x-cloak x-show="transacting" class="flex justify-center">
                <div class="spinner"></div>
            </div>
            <div x-cloak x-show="!transacting">
                <div x-show="!selection" class="flex flex-wrap px-2 lg:px-8 text-white font-light">
                    <p class="w-full px-4 py-4 text-2xl text-center">Create New XETA Wallet</p>

                    <div class="w-1/2 mb-4">
                        <div @click="await generateKeys()" class="mx-4 cursor-pointer rounded-2xl bg-gray-900 bg-opacity-40 hover:bg-black shadow p-4 text-center">
                            <p class="text-lg mb-2">Create new wallet (manage keys yourself)</p>
                            <p class="text-sm">You will receive a public and private key which you need to store securely.</p>
                        </div>
                    </div>
                    <div class="w-1/2 mb-4">
                        <div @click="selection = 'managed'" class="mx-4 cursor-pointer rounded-2xl bg-gray-900 bg-opacity-40 hover:bg-black shadow p-4 text-center">
                            <p class="text-lg mb-2">Create new wallet (managed wallet)</p>
                            <p class="text-sm">Xeta Reality will manage wallet for you, transactions can be signed with these wallet.</p>
                        </div>
                    </div>

                    <p class="w-full px-4 py-4 text-2xl text-center">Import Existing XETA Wallet</p>

                    <div class="w-1/2 mb-4">
                        <div @click="selection = 'import'" class="mx-4 cursor-pointer rounded-2xl bg-gray-900 bg-opacity-40 hover:bg-black shadow p-4 text-center">
                            <p class="text-lg mb-2">Self-managed wallet keys</p>
                            <p class="text-sm">Import wallet via private key. Choose this option if you've created a Xeta private/public key previously.</p>
                        </div>
                    </div>
                    <div class="w-1/2 mb-4">
                        <div @click="selection = 'wallet'" class="mx-4 cursor-pointer rounded-2xl bg-gray-900 bg-opacity-40 hover:bg-black shadow p-4 text-center">
                            <p class="text-lg mb-2">Managed wallet</p>
                            <p class="text-sm">Log-in using your username and secret. Choose this option if you have a managed wallet on Xeta.</p>
                        </div>
                    </div>
                </div>

                <div x-show="selection == 'generate'" class="flex flex-wrap w-full px-2 lg:px-8 py-8 text-white font-light">
                    <p @click="selection = null" class="cursor-pointer text-gray-200 mb-4 underline">← Go back</p>

                    <div class="mb-6 w-full">
                        <label for="" class="text-gray-200 text-xs font-semibold uppercase mb-2 block">Your public key (public wallet address)</label>
                        <input x-model="publicKey" @focus="$el.select()" type="text" class="rounded-2xl shadow border-pink-300 border-opacity-50 focus:border-pink-400 border-2 transition-all px-4 py-2 bg-transparent text-gray-100 outline-none focus:outline-none overflow-hidden w-full focus:ring focus:ring-purple-500" />
                    </div>
      
                    <div class="mb-6 w-full">
                        <label for="" class="text-gray-200 text-xs font-semibold uppercase mb-2 block">Your private key (keep this secret at any cost!)</label>
                        <input x-model="privateKey" @focus="$el.select()" type="text" class="rounded-2xl shadow border-pink-300 border-opacity-50 focus:border-pink-400 border-2 transition-all px-4 py-2 bg-transparent text-gray-100 outline-none focus:outline-none overflow-hidden w-full focus:ring focus:ring-purple-500" />
                    </div>

                    <div class="w-full">
                        <button @click.prevent="selection = null, privateKey = null, connectWallet(), hideModal()" class="cursor-pointer text-white py-2 px-4 rounded-2xl block text-center bg-black hover:bg-gray-900 text-lg font-light transition-all w-full">I've stored my keys securely - connect wallet & close modal</button>
                    </div>
                </div>

                <form x-data x-show="selection == 'managed'" class="flex flex-wrap w-full px-2 lg:px-8 py-8 text-white font-light">
                    <p @click="selection = null" class="cursor-pointer text-gray-200 mb-4 underline">← Go back</p>

                    <div class="mb-6 w-full">
                        <label for="" class="text-gray-200 text-xs font-semibold uppercase mb-2 block">Email or username</label>
                        <input x-model="account" data-rules='["required", "minLength:6"]' @input="validate($el)" @blur="validate($el)" type="text" class="rounded-2xl shadow border-pink-300 border-opacity-50 focus:border-pink-400 border-2 transition-all px-4 py-2 bg-transparent text-gray-100 outline-none focus:outline-none overflow-hidden w-full focus:ring focus:ring-purple-500" />
                        <p class="text-gray-200 text-xs mt-2 hidden"></p>
                    </div>

                    <div class="mb-6 w-full">
                        <label for="" class="text-gray-200 text-xs font-semibold uppercase mb-2 block">Your secret</label>
                        <input x-model="secret" data-rules='["required", "minLength:6"]' @input="validate($el)" @blur="validate($el)" type="password" class="rounded-2xl shadow border-pink-300 border-opacity-50 focus:border-pink-400 border-2 transition-all px-4 py-2 bg-transparent text-gray-100 outline-none focus:outline-none overflow-hidden w-full focus:ring focus:ring-purple-500" />
                        <p class="text-gray-200 text-xs mt-2 hidden"></p>
                    </div>

                    <div class="w-full">
                        <button @click.prevent="validForm($root) ? await createWallet() : ''" type="submit" class="cursor-pointer text-white py-2 px-4 rounded-2xl block text-center bg-black hover:bg-gray-900 text-lg font-light transition-all w-full">Create wallet and show public key</button>
                    </div>
                </form>

                <div x-show="selection == 'public'" class="flex flex-wrap w-full px-2 lg:px-8 py-8 text-white font-light">
                    <div class="mb-6 w-full">
                        <label for="" class="text-gray-200 text-xs font-semibold uppercase mb-2 block">Your public key (public wallet address)</label>
                        <input x-model="publicKey" @focus="$el.select()" type="text" class="rounded-2xl shadow border-pink-300 border-opacity-50 focus:border-pink-400 border-2 transition-all px-4 py-2 bg-transparent text-gray-100 outline-none focus:outline-none overflow-hidden w-full focus:ring focus:ring-purple-500" />
                    </div>

                    <div class="w-full">
                        <button @click.prevent="selection = null, hideModal()" class="cursor-pointer text-white py-2 px-4 rounded-2xl block text-center bg-black hover:bg-gray-900 text-lg font-light transition-all w-full">I've stored my public key - close this window</button>
                    </div>
                </div>

                <form x-data x-show="selection == 'import'" class="flex flex-wrap w-full px-2 lg:px-8 py-8 text-white font-light">
                    <p @click="selection = null" class="cursor-pointer text-gray-200 mb-4 underline">← Go back</p>

                    <!-- <div class="mb-6 w-full">
                        <label for="" class="text-gray-200 text-xs font-semibold uppercase mb-2 block">Your public key (public wallet address)</label>
                        <input x-model="publicKey" data-rules='["required", "minLength:32", "maxLength:44"]' @input="validate($el)" @blur="validate($el)" type="text" class="rounded-2xl shadow border-pink-300 border-opacity-50 focus:border-pink-400 border-2 transition-all px-4 py-2 bg-transparent text-gray-100 outline-none focus:outline-none overflow-hidden w-full focus:ring focus:ring-purple-500" />
                        <p class="text-gray-200 text-xs mt-2 hidden"></p>
                    </div> -->

                    <div class="mb-6 w-full">
                        <label for="" class="text-gray-200 text-xs font-semibold uppercase mb-2 block">Your private key</label>
                        <input x-model="privateKey" data-rules='["required", "minLength:32", "maxLength:44"]' @input="validate($el)" @blur="validate($el)" type="secret" class="rounded-2xl shadow border-pink-300 border-opacity-50 focus:border-pink-400 border-2 transition-all px-4 py-2 bg-transparent text-gray-100 outline-none focus:outline-none overflow-hidden w-full focus:ring focus:ring-purple-500" />
                        <p class="text-gray-200 text-xs mt-2 hidden"></p>
                    </div>

                    <div class="w-full">
                        <button @click.prevent="validForm($root) ? await importKeys() : ''" type="submit" class="cursor-pointer text-white py-2 px-4 rounded-2xl block text-center bg-black hover:bg-gray-900 text-lg font-light transition-all w-full">Initialize wallet and close modal</button>
                    </div>
                </form>

                <form x-data x-show="selection == 'wallet'" class="flex flex-wrap w-full px-2 lg:px-8 py-8 text-white font-light">
                    <p @click="selection = null" class="cursor-pointer text-gray-200 mb-4 underline">← Go back</p>

                    <div class="mb-6 w-full">
                        <label for="" class="text-gray-200 text-xs font-semibold uppercase mb-2 block">Email or username</label>
                        <input x-model="account" data-rules='["required", "minLength:6", "maxLength:40"]' @input="validate($el)" @blur="validate($el)" type="text" class="rounded-2xl shadow border-pink-300 border-opacity-50 focus:border-pink-400 border-2 transition-all px-4 py-2 bg-transparent text-gray-100 outline-none focus:outline-none overflow-hidden w-full focus:ring focus:ring-purple-500" />
                        <p class="text-gray-200 text-xs mt-2 hidden"></p>
                    </div>

                    <div class="mb-6 w-full">
                        <label for="" class="text-gray-200 text-xs font-semibold uppercase mb-2 block">Your secret</label>
                        <input x-model="secret" data-rules='["required", "minLength:6", "maxLength:40"]' @input="validate($el)" @blur="validate($el)" type="password" class="rounded-2xl shadow border-pink-300 border-opacity-50 focus:border-pink-400 border-2 transition-all px-4 py-2 bg-transparent text-gray-100 outline-none focus:outline-none overflow-hidden w-full focus:ring focus:ring-purple-500" />
                        <p class="text-gray-200 text-xs mt-2 hidden"></p>
                    </div>

                    <div class="w-full">
                        <button @click.prevent="validForm($root) ? await getWallet() : ''" type="submit" class="cursor-pointer text-white py-2 px-4 rounded-2xl block text-center bg-black hover:bg-gray-900 text-lg font-light transition-all w-full">Initialize wallet</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
        <script>
function actionsModal() {
    return {
        selection: null,
        init() {
        },
        backup() {
            showModal('walletModal')
            setData('wallet-modal', {selection: 'generate', publicKey: Alpine.sstore('publicKey'), privateKey: Alpine.sstore('privateKey')})
        }
    }
}
</script>

<div x-cloak name="actionsModal" id="actions-modal" x-show.transition.opacity="$store.modal == 'actionsModal'" x-data="actionsModal" class="z-50 fixed w-full h-full top-0 left-0">
    <div @click="selection = null, hideModal()" class="backdrop absolute w-full h-full bg-black opacity-75 z-0"></div>

    <div @click="selection = null, hideModal()" class="relative cursor-pointer flex w-full justify-center py-4 text-white text-sm z-50">
        <svg class="fill-current text-white mt-0.5" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18">
            <path d="M14.53 4.53l-1.06-1.06L9 7.94 4.53 3.47 3.47 4.53 7.94 9l-4.47 4.47 1.06 1.06L9 10.06l4.47 4.47 1.06-1.06L10.06 9z"></path>
        </svg>
        <span class="ml-1">Close</span>
    </div>


    <div class="overflow-scroll max-h-full mx-auto w-full md:w-1/2 pb-32 z-50 relative disable-scrollbar">
        <div class="rounded-2xl shadow w-full relative bg-pink-900 px-2 lg:px-8 py-4 bg-top bg-cover" style="background-image: url(/media/background.jpg)">
            
            <div x-show="!selection" class="flex flex-wrap justify-center">
                <p class="w-full px-4 py-4 text-2xl text-center text-white font-light">Select Wallet Action</p>
                <p class="w-full px-4 pb-4 text-sm text-center text-white">Connected Wallet: <span x-text="Alpine.sstore('publicKey')"></span></p>

                <ul class="list-none w-2/5 mr-2 text-center">
                    <li @click="window.location.href = '/address/?address='+$lstore('publicKey')" class="cursor-pointer text-white py-2 px-4 rounded-2xl block text-center bg-black hover:bg-gray-900 text-lg font-light transition-all w-full mb-4">View Account</li>
                    <li @click="disconnectWallet(), showModal('walletModal')" class="cursor-pointer text-white py-2 px-4 rounded-2xl block text-center bg-black hover:bg-gray-900 text-lg font-light transition-all w-full mb-4">Change Wallet</li>
                    <li @click="disconnectWallet(), hideModal()" class="cursor-pointer text-white py-2 px-4 rounded-2xl block text-center bg-black hover:bg-gray-900 text-lg font-light transition-all w-full mb-4">Disconnect</li>
                    <li @click="backup()" class="cursor-pointer text-white py-2 px-4 rounded-2xl block text-center bg-black hover:bg-gray-900 text-lg font-light transition-all w-full mb-4">Back-up Keys</li>
                </ul>
                <ul class="list-none w-2/5 ml-2 text-center">
                    <li @click="action('transfer.create'), selection = null" class="cursor-pointer text-white py-2 px-4 rounded-2xl block text-center bg-black hover:bg-gray-900 text-lg font-light transition-all w-full mb-4">New Transfer</li>
                    <li @click="action('token.create'), selection = null" class="cursor-pointer text-white py-2 px-4 rounded-2xl block text-center bg-black hover:bg-gray-900 text-lg font-light transition-all w-full mb-4">New Token</li>
                    <li @click="action('pool.create'), selection = null" class="cursor-pointer text-white py-2 px-4 rounded-2xl block text-center bg-black hover:bg-gray-900 text-lg font-light transition-all w-full mb-4">New Pool</li>
                    <li @click="action('allowance.update'), selection = null" class="cursor-pointer text-white py-2 px-4 rounded-2xl block text-center bg-black hover:bg-gray-900 text-lg font-light transition-all w-full mb-4">New Allowance</li>
                    <li @click="action('claim.create'), selection = null" class="cursor-pointer text-white py-2 px-4 rounded-2xl block text-center bg-black hover:bg-gray-900 text-lg font-light transition-all w-full mb-4">New Claim</li>
                </ul>
            </div>
        </div>
    </div>
</div>
        <script>
function transactModal() {
    return {
        transacting: false,
        uploading: false,
        inputs: [],
        title: null,
        description: null,
        confirmation: null,
        function: null,
        fts: {},
        nfts: {},
        tokens: {},
        claims: {},
        addresses: {},
        programs: {
            auction: 'Auction',
            launch: 'Launch',
            lending: 'Lending',
            lock: 'Lock',
            loot: 'Loot',
            lottery: 'Lottery',
            royalty: 'Royalty',
            staking: 'Staking',
            vote: 'Vote',
        },
        loaded: {},
        values: {},
        init() {
            var self = this
            this.inputs.forEach(function(input) {
                if (self.values[input.name] == null) {
                    if (input.value) self.values[input.name] = Alpine.store(input.value.split('.')[0])[input.value.split('.')[1]]
                    else self.values[input.name] = null
                }
            })

            // Init token, claim and address suggestions
            if (Alpine.store('publicKey')) {
                var suggest = this.inputs.map(function(i) {return i.suggest})
                if (!this.loaded.tokens && (suggest.includes('fts') || suggest.includes('tokens'))) {
                    this.fts = {
                        '11111111111111111111111111111xeta': 'Xeta (XETA): 0',
                        '11111111111111111111111111111xusd': 'Xeta USD (XUSD): 0',
                        '1111111111111111111111111sponsored': 'Xeta Sponsored (XS): 0',
                    }

                    Xeta.balance.scanAddressAmount({address: Alpine.store('publicKey')}, {limit: 100, preview: true}).then(function(data) {
                        data.forEach(function(d) {
                            if (d.amount != '0') {
                                self.fts[d.token] = [d.tokenPreview.name, '('+d.tokenPreview.symbol+'):', d.amount].join(' ')
                            }
                        })
                        self.tokens = Object.assign({}, self.fts, self.nfts)
                    }).catch(function(e) {throw e})
                    this.loaded.tokens = true
                }

                if (!this.loaded.nfts && (suggest.includes('nfts') || suggest.includes('tokens'))) {
                    Xeta.token.scanOwnerCreated({owner: Alpine.store('publicKey')}, {limit: 100}).then(function(data) {
                        data.forEach(function(d) { self.nfts[d.address] = d.name })
                        delete self.nfts[Alpine.store('publicKey')] // Delete own profile address
                        self.tokens = Object.assign({}, self.fts, self.nfts)
                    }).catch(function(e) {throw e})
                }

                if (!this.loaded.addresses && suggest.includes('addresses')) {
                    this.addresses = {[Alpine.store('publicKey')]: 'Connected Wallet: '+Alpine.store('publicKey')}

                    Xeta.transfer.scanFromCreated({from: Alpine.store('publicKey')}, {limit: 100}).then(function(data) {
                        data.forEach(function(d) { self.addresses[d.to] = d.to })
                    }).catch(function(e) {throw e})
                }

                // Reset claims with every new input
                if (suggest.includes('claims')) {
                    self.claims = {}
                    if (Alpine.store('resource') == 'pool') {
                        Xeta.claim.scanIssuerHolder({issuer: gup('address'), holder: Alpine.store('publicKey')}, {limit: 100}).then(function(data) {
                            data.forEach(function(d) { self.claims[d.hash] = [d.hash.slice(0, 10)+'..', d.tokenAmount ? d.tokenAmount+' Tokens' : d.xetaAmount ? d.xetaAmount+' XETA' : '', d.unlocks ? 'Unlocks: '+new Date(d.unlocks).toLocaleDateString() : ''].join(' ') })
                        }).catch(function(e) {throw e})
                    } else {
                        Xeta.claim.scanHolderCreated({holder: Alpine.store('publicKey')}, {limit: 100}).then(function(data) {
                            data.forEach(function(d) { self.claims[d.hash] = [d.hash.slice(0, 10)+'..', d.tokenAmount ? d.tokenAmount+' Tokens' : d.xetaAmount ? d.xetaAmount+' XETA' : '', d.unlocks ? 'Unlocks: '+new Date(d.unlocks).toLocaleDateString() : ''].join(' ') })
                        }).catch(function(e) {throw e})
                    }
                }
            }
        },
        /**
         * Parse inputs into target datatype
         */
        data() {
            var datatypes = Object.fromEntries(this.inputs.map(function(i) {
                return [i.name, i.type]
            }))

            var parsed = {}
            Object.entries(this.values).forEach(function(e) {
                var v = typeof e[1] == 'string' ? e[1].trim() : e[1]
                if (v === null || v === undefined || v === '') return

                if (datatypes[e[0]] == 'string') v = String(v)
                else if (datatypes[e[0]] == 'strings') v = v.split(String.fromCharCode(10))
                else if (datatypes[e[0]] == 'number') v = parseFloat(v)
                else if (datatypes[e[0]] == 'numbers') v = v.split(String.fromCharCode(10)).map(function(i) {return parseFloat(i)})
                else if (datatypes[e[0]] == 'hash') v = String(v)
                else if (datatypes[e[0]] == 'hashes') v = v.split(String.fromCharCode(10))
                else if (datatypes[e[0]] == 'text') v = String(v)
                else if (datatypes[e[0]] == 'integer') v = parseInt(v)
                else if (datatypes[e[0]] == 'timestamp') v = new Date(v).getTime()
                else if (datatypes[e[0]] == 'amount') v = String(v)
                else if (datatypes[e[0]] == 'boolean') v = !!v
                else if (datatypes[e[0]] == 'object') v = JSON.parse(v)
                else v = String(v)

                parsed[e[0]] = v
            })

            return parsed
        },
        submit() {  
            if (this.transacting) return

            // Private key must be set for signing
            if (!Xeta.config.privateKey) {
                alert('Please (re)connect your wallet.')
                return
            }

            if (this.confirmation && !confirm(this.confirmation+' This blockchain transaction is irreversable. Continue?')) return

            var self = this
            this.transacting = true
            Xeta.instruction.wrap(Object.assign({}, {function: this.function}, this.data())).then(function(tx) {
                if (['address.update', 'token.update', 'claim.update', 'claim.resolve'].includes(self.function)) window.location.reload()
                else {
                    setData('confirmation-modal', {transaction: tx, details: formatDetails(tx, 'transaction')})
                    showModal('confirmationModal')
                }
            }).catch(function(e) {
                console.log(e.message)
                self.transacting = false
                alert(e)

                if (e.message == 'quota:limited') window.location.href = '/pages/quota'
            })
        },
        /**
         * Upload preview
         */
        preview(e) {
            if (!this.uploading) {
                var self = this
                this.uploading = true

                var file = e.target.files[0]
                var reader = new FileReader()
                reader.readAsDataURL(file)

                reader.onloadend = function() {
                    ajax('https://interface.xetareality.com/media', {data: reader.result}, function(data) {
                        self.values['preview'] = JSON.parse(data).url // Hosted url
                        self.uploading = false
                    }, function(status) { alert('upload:error') })
                }                  
            }
        },
        info(field) {
            if (!this.function) return
            var base = this.function.split('.')[0]
            if (Infos[base]) return Infos[base][field]
            else return Infos.program[field]
        }
    }
}
</script>

<div x-cloak name="transactModal" id="transact-modal" x-show.transition.opacity="$store.modal == 'transactModal'" x-data="transactModal" class="z-50 fixed w-full h-full top-0 left-0">
    <div @click="hideModal()" class="backdrop absolute w-full h-full bg-black opacity-75 z-0"></div>

    <div @click="hideModal()" class="relative cursor-pointer flex w-full justify-center py-4 text-white text-sm z-50">
        <svg class="fill-current text-white mt-0.5" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18">
            <path d="M14.53 4.53l-1.06-1.06L9 7.94 4.53 3.47 3.47 4.53 7.94 9l-4.47 4.47 1.06 1.06L9 10.06l4.47 4.47 1.06-1.06L10.06 9z"></path>
        </svg>
        <span class="ml-1">Close</span>
    </div>

    <div class="overflow-scroll max-h-full mx-auto w-full md:w-1/2 pb-32 z-50 relative disable-scrollbar">
        <div class="rounded-2xl shadow w-full relative bg-pink-900 px-4 lg:px-8 py-4 bg-top bg-cover" style="background-image: url(/media/background.jpg)">
            <p class="w-full px-4 pb-4 text-2xl text-center text-white" x-text="title"></p>
            <p class="w-full px-4 pb-4 text-sm text-center text-white" x-text="description"></p>

            <div x-cloak x-show="transacting" class="flex justify-center">
                <div class="spinner"></div>
            </div>

            <form x-cloak x-show="!transacting" x-data>
                <template x-for="input in inputs">
                    <div class="mb-6 w-full">
                        <label class="text-gray-200 text-xs font-semibold uppercase mb-2 block" x-text="input.name+' - '+info(input.name)+(input.required ? ' (required)' : '')"></label>

                        <template x-if="['hash', 'string'].includes(input.type)">
                            <div class="relative">
                                <input
                                    x-model="values[input.name]"
                                    :data-rules="JSON.stringify(['maxLength:256']
                                        .concat(input.required ? 'required' : 'optional')
                                        .concat(input.type == 'hash' ? ['minLength:32', 'maxLength:44'] : []))"
                                    @input="validate($el)"
                                    @blur="validate($el)"
                                    type="text"
                                    class="rounded-2xl shadow border-pink-300 border-opacity-50 focus:border-pink-400 border-2 transition-all px-4 py-2 bg-transparent text-gray-100 outline-none focus:outline-none overflow-hidden w-full focus:ring focus:ring-purple-500"
                                />
                                <p class="text-gray-200 text-xs mt-2 hidden"></p>

                                <div x-show="input.suggest" class="absolute right-0 top-0 px-5 py-2.5 cursor-pointer">
                                    <span class="text-white">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="currentColor" class="" viewBox="0 0 16 16">
                                          <path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/>
                                        </svg>
                                    </span>
                                    <select x-model="values[input.name]" class="opacity-0 absolute top-0 left-0 w-full h-full no-arrow py-1 cursor-pointer text-gray-600 outline-none focus:outline-none">
                                        <option value="" selected>Custom</option>
                                        <template x-for="[k, v] in (input.suggest ? Object.entries($data[input.suggest]) : [])">
                                            <option :value="k" x-text="v"></option>
                                        </template>
                                    </select>
                                </div>

                                <div x-show="input.name == 'preview'" class="absolute right-0 top-0 px-5 py-3.5 cursor-pointer">
                                    <span class="text-white ">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-cloud-upload" viewBox="0 0 16 16">
                                            <path fill-rule="evenodd" d="M4.406 1.342A5.53 5.53 0 0 1 8 0c2.69 0 4.923 2 5.166 4.579C14.758 4.804 16 6.137 16 7.773 16 9.569 14.502 11 12.687 11H10a.5.5 0 0 1 0-1h2.688C13.979 10 15 8.988 15 7.773c0-1.216-1.02-2.228-2.313-2.228h-.5v-.5C12.188 2.825 10.328 1 8 1a4.53 4.53 0 0 0-2.941 1.1c-.757.652-1.153 1.438-1.153 2.055v.448l-.445.049C2.064 4.805 1 5.952 1 7.318 1 8.785 2.23 10 3.781 10H6a.5.5 0 0 1 0 1H3.781C1.708 11 0 9.366 0 7.318c0-1.763 1.266-3.223 2.942-3.593.143-.863.698-1.723 1.464-2.383z"/>
                                            <path fill-rule="evenodd" d="M7.646 4.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 5.707V14.5a.5.5 0 0 1-1 0V5.707L5.354 7.854a.5.5 0 1 1-.708-.708l3-3z"/>
                                        </svg>
                                    </span>
                                    <input @change="preview($event)" class="opacity-0 absolute top-0 left-0 w-full h-full no-arrow py-1 cursor-pointer text-gray-600 outline-none focus:outline-none" name="media" type="file" accept="image/bmp,image/gif,image/jpeg,image/png,image/tiff,image/webp" />
                                </div>
                            </div>
                        </template>

                        <template x-if="['integer', 'timestamp', 'number', 'amount'].includes(input.type)">
                            <div>
                                <input
                                    x-model="values[input.name]"
                                    :data-rules="JSON.stringify(['min:0']
                                        .concat(input.required ? 'required' : 'optional'))"
                                    @input="validate($el)"
                                    @blur="validate($el)"
                                    :type="input.type == 'timestamp' ? 'datetime-local' : 'number'"
                                    class="rounded-2xl shadow border-pink-300 border-opacity-50 focus:border-pink-400 border-2 transition-all px-4 py-2 bg-transparent text-gray-100 outline-none focus:outline-none overflow-hidden w-full focus:ring focus:ring-purple-500"
                                />
                                <p class="text-gray-200 text-xs mt-2 hidden"></p>
                            </div>
                        </template>

                        <template x-if="['text', 'object', 'strings', 'hashes', 'numbers'].includes(input.type)">
                            <div>
                                <span x-cloak x-show="['strings', 'hashes', 'numbers'].includes(input.type)" class="text-gray-200 text-xs capitalize mb-2 block">One per line</span>
                                <textarea
                                    x-model="values[input.name]"
                                    :data-rules="JSON.stringify(['maxLength:8192']
                                        .concat(input.type == 'object' ? 'json' : [])
                                        .concat(input.required ? 'required' : []))"
                                    @input="validate($el)"
                                    @blur="validate($el)"
                                    type="text"
                                    rows="3"
                                    class="rounded-2xl shadow border-pink-300 border-opacity-50 focus:border-pink-400 border-2 transition-all px-4 py-2 bg-transparent text-gray-100 font-light outline-none focus:outline-none overflow-hidden w-full focus:ring focus:ring-purple-500"
                                ></textarea>
                                <p class="text-gray-200 text-xs mt-2 hidden"></p>
                            </div>
                        </template>

                        <template x-if="['boolean'].includes(input.type)">
                            <div>
                                <label class="text-gray-200 text-xs font-semibold uppercase mb-2 block cursor-pointer items-center flex select-none">
                                    <input :checked="values[input.name]" x-model="values[input.name]" type="checkbox" class="mr-2 h-6 w-6">
                                    <span>Yes</span>
                                </label>
                            </div>
                        </template>
                    </div>
                </template>

                <div>
                    <button @click.prevent="validForm($root) ? submit() : ''" type="submit" class="cursor-pointer text-white py-2 px-4 rounded-2xl block text-center bg-black hover:bg-gray-800 transition-all w-full focus:ring focus:ring-purple-500">Submit</button>
                </div>
            </form>
        </div>
    </div>
</div>
        <script>
function faucetModal() {
    return {
        transacting: false,
        selection: null,
        wallet: Alpine.sstore('publicKey') || '',
        email: null,
        key: null,
        tweeted: null,
        request() {
            if (!this.transacting) {
                var self = this;
                this.transacting = true

                try {
                    if (!this.email || !this.email.includes('@gmail.com')) throw Error('email:invalid')
                    Xeta.models.validFormats({wallet: this.wallet}, {wallet: ['hash']})
                } catch (e) {
                    alert(e.message)
                    this.transacting = false
                    return
                }

                ajax(Xeta.config.interface+'/faucet', {email: this.email, wallet: this.wallet}, function(data, status) {
                    if (status == 200 || data == 'email:sent') {
                        self.selection = 'confirm'
                    } else {
                        alert(data)
                    }

                    self.transacting = false
                }, function(error) {
                    self.transacting = false
                    alert(error)
                })
            }
        },
        confirm() {
            if (!this.transacting) {
                var self = this;
                this.transacting = true

                try {
                    if (!this.email || !this.wallet || !this.key) throw Error('input:invalid')
                    if (!this.tweeted) throw Error('tweet:missing')
                } catch (e) {
                    alert(e.message)
                    this.transacting = false
                    return
                }

                ajax(Xeta.config.interface+'/confirm', {email: this.email, wallet: this.wallet, key: this.key}, function(data, status) {
                    if (status == 200) {
                        alert('Your request was processed successfully - enjoy!')
                        hideModal()
                        window.location.href = '/address/?address='+self.wallet
                    } else {
                        alert(data)
                    }
                    
                    self.transacting = false
                }, function(error) {
                    self.transacting = false
                    alert(error)
                })
            }
        },
    }
}
</script>
<div x-cloak name="faucetModal" id="faucet-modal" x-show.transition.opacity="$store.modal == 'faucetModal'" x-data="faucetModal" class="z-50 fixed w-full h-full top-0 left-0">
    <div @click="hideModal()" class="backdrop absolute w-full h-full bg-black opacity-75 z-0"></div>

    <div @click="hideModal()" class="relative cursor-pointer flex w-full justify-center py-4 text-white text-sm z-50">
        <svg class="fill-current text-white mt-0.5" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18">
            <path d="M14.53 4.53l-1.06-1.06L9 7.94 4.53 3.47 3.47 4.53 7.94 9l-4.47 4.47 1.06 1.06L9 10.06l4.47 4.47 1.06-1.06L10.06 9z"></path>
        </svg>
        <span class="ml-1">Close</span>
    </div>

    <div class="overflow-scroll max-h-full mx-auto w-full md:w-1/2 pb-32 z-50 relative disable-scrollbar">
        <div class="rounded-2xl shadow w-full relative bg-pink-900 px-2 lg:px-8 py-4 bg-top bg-cover" style="background-image: url(/media/background.jpg)">
            <div x-cloak x-show="transacting" class="flex justify-center">
                <div class="spinner"></div>
            </div>
            <div x-cloak x-show="!transacting">
                <div class="flex flex-wrap px-2 lg:px-8 text-white font-light">
                    <p class="w-full px-4 py-4 text-2xl text-center">Request Free XETA Tokens</p>
                    <p class="w-full px-4 pb-2 text-sm text-center text-white">If you have a Gmail email address, you are eligible to receive 10 XETA tokens on Mainnet, and 1000 XETA tokens on Testnet.</p>
                    <p x-cloak x-show="Alpine.store('publicKey')" class="w-full px-4 text-sm text-center text-white">Connected Wallet: <span x-text="Alpine.sstore('publicKey')"></span></p>

                    <form x-data x-show="!selection" class="flex flex-wrap w-full px-2 lg:px-8 py-8 text-white font-light">
                        <div class="mb-6 w-full">
                            <label for="" class="text-gray-200 text-xs font-semibold uppercase mb-2 block">Your Gmail Address</label>
                            <input x-model="email" data-rules='["required"]' @input="validate($el)" @blur="validate($el)" type="text" class="rounded-2xl shadow border-pink-700 focus:border-pink-500 border-2 transition-all px-4 py-2 bg-transparent text-gray-100 font-light outline-none focus:outline-none overflow-hidden w-full focus:ring focus:ring-purple-500" />
                            <p class="text-gray-200 text-xs mt-2 hidden"></p>
                        </div>

                        <div class="mb-6 w-full">
                            <label class="text-gray-200 text-xs font-semibold uppercase mb-2 block">Your XETA Public Key Address <span @click="showModal('walletModal')" class="text-gray-200 text-xs font-semibold uppercase underline cursor-pointer">Create New XETA Wallet or Connect Existing</span></label>
                            <input x-model="wallet" data-rules='["required"]' @input="validate($el)" @blur="validate($el)" type="text" class="rounded-2xl shadow border-pink-700 focus:border-pink-500 border-2 transition-all px-4 py-2 bg-transparent text-gray-100 font-light outline-none focus:outline-none overflow-hidden w-full focus:ring focus:ring-purple-500" />
                            <p class="text-gray-200 text-xs mt-2 hidden"></p>
                        </div>

                        <div class="w-full">
                            <button @click.prevent="validForm($root) && email && wallet ? request() : null" type="submit" class="cursor-pointer text-white py-2 px-4 rounded-2xl block text-center bg-black hover:bg-gray-900 text-lg font-light transition-all w-full">Confirm Email</button>
                        </div>
                    </form>

                    <form x-data x-show="selection == 'confirm'" class="flex flex-wrap w-full px-2 lg:px-8 py-8 text-white font-light">
                        <div class="mb-6 w-full">
                            <label for="" class="text-gray-200 text-xs font-semibold uppercase mb-2 block">Your Email Confirmation Code</label>
                            <input x-model="key" data-rules='["required"]' @input="validate($el)" @blur="validate($el)" type="text" class="rounded-2xl shadow border-pink-700 focus:border-pink-500 border-2 transition-all px-4 py-2 bg-transparent text-gray-100 font-light outline-none focus:outline-none overflow-hidden w-full focus:ring focus:ring-purple-500" />
                            <p class="text-gray-200 text-xs mt-2 hidden"></p>
                        </div>

                        <div class="mb-6 w-full">
                            <label for="" class="text-gray-200 text-xs font-semibold uppercase mb-2 block">Tag XetaReality on Twitter</label>
                            <a @click="tweeted = true" href="https://twitter.com/intent/tweet?text=Hey%20@XetaReality,%20thanks%20for%20the%20free%20tokens!" target="_blank" class="cursor-pointer text-white py-2 px-4 rounded-2xl block text-center bg-blue-500 hover:bg-blue-700 text-lg font-light transition-all w-full">Share a Tweet</a>
                        </div>
                        
                        <div class="w-full">
                            <button @click.prevent="validForm($root) && key && tweeted ? confirm() : alert('Enter your confirmation code and share a tweet to receive tokens.')" type="submit" class="cursor-pointer text-white py-2 px-4 rounded-2xl block text-center bg-black hover:bg-gray-900 text-lg font-light transition-all w-full">Receive Tokens</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
        <script>
function confirmationModal() {
    return {
        transaction: {},
        details: {},
        init() {

        }
    }
}
</script>

<div x-cloak name="confirmationModal" id="confirmation-modal" x-show.transition.opacity="$store.modal == 'confirmationModal'" x-data="confirmationModal" class="z-50 fixed w-full h-full top-0 left-0">
    <div @click="selection = null, hideModal()" class="backdrop absolute w-full h-full bg-black opacity-75 z-0"></div>

    <div @click="selection = null, hideModal()" class="relative cursor-pointer flex w-full justify-center py-4 text-white text-sm z-50">
        <svg class="fill-current text-white mt-0.5" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18">
            <path d="M14.53 4.53l-1.06-1.06L9 7.94 4.53 3.47 3.47 4.53 7.94 9l-4.47 4.47 1.06 1.06L9 10.06l4.47 4.47 1.06-1.06L10.06 9z"></path>
        </svg>
        <span class="ml-1">Close</span>
    </div>


    <div class="overflow-scroll max-h-full mx-auto w-full md:w-1/2 pb-32 z-50 relative disable-scrollbar">
        <div class="rounded-2xl shadow w-full relative bg-pink-900 px-4 lg:px-8 py-4 bg-top bg-cover" style="background-image: url(/media/background.jpg)">
            <p class="w-full px-4 pb-4 text-2xl text-center text-white">Transaction confirmed!</p>
            <p class="w-full px-4 pb-4 text-sm text-center text-white">Your transaction was successfully processed by at least one validator node. Other nodes will confirm this transaction shortly (usually in <1 second).</p>

            <div class="bg-black rounded-2xl px-6 py-4 mb-4 section">
                <table class="w-full table-fixed font-light text-sm">
                    <thead>
                        <tr>
                            <th class="text-gray-400 text-left uppercase w-1/3"></th>
                            <th class="text-gray-400 text-left uppercase w-2/3"></th>
                        </tr>
                    </thead>
                    <tbody>
                        <template x-for="[key, value] in Object.entries(details)">
                            <tr class="border-b border-gray-800">
                                <td class="py-2 text-gray-400 capitalize text-sm font-semibold py-2" x-text="key"></td>
                                <td @click="$el.classList.toggle('truncate')" class="text-right text-white truncate break-all py-2 select-none" x-html="value"></td>
                            </tr>
                        </template>
                    </tbody>
                </table>
            </div>
            
        </div>
    </div>
</div>
    </body>
</html>