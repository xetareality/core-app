<script>function transactModal(){return{transacting:!1,uploading:!1,inputs:[],title:null,description:null,confirmation:null,function:null,fts:{},nfts:{},tokens:{},claims:{},addresses:{},programs:{auction:"Auction",launch:"Launch",lending:"Lending",lock:"Lock",loot:"Loot",lottery:"Lottery",royalty:"Royalty",staking:"Staking",vote:"Vote"},loaded:{},values:{},init(){var t,n=this;Alpine.store("publicKey")?(this.inputs.length&&Object.keys(this.data()).length==this.inputs.length&&!this.transacting&&this.submit(),t=this.inputs.map(function(t){return t.suggest}),this.loaded.tokens||!t.includes("fts")&&!t.includes("tokens")||(this.fts={"11111111111111111111111111111xeta":"Xeta (XETA): 0","11111111111111111111111111111xusd":"Xeta USD (XUSD): 0","1111111111111111111111111sponsored":"Xeta Sponsored (XS): 0"},Xeta.balance.scanAddressAmount({address:Alpine.store("publicKey")},{limit:100,preview:!0}).then(function(t){t.forEach(function(t){"0"!=t.amount&&(n.fts[t.token]=[t.tokenPreview.name,"("+t.tokenPreview.symbol+"):",t.amount].join(" "))}),n.tokens=Object.assign({},n.fts,n.nfts)}).catch(function(t){throw t}),this.loaded.tokens=!0),this.loaded.nfts||!t.includes("nfts")&&!t.includes("tokens")||Xeta.token.scanOwnerCreated({owner:Alpine.store("publicKey")},{limit:100}).then(function(t){t.forEach(function(t){n.nfts[t.address]=t.name}),delete n.nfts[Alpine.store("publicKey")],n.tokens=Object.assign({},n.fts,n.nfts)}).catch(function(t){throw t}),!this.loaded.addresses&&t.includes("addresses")&&(this.addresses={[Alpine.store("publicKey")]:"Connected Wallet: "+Alpine.store("publicKey")},Xeta.transfer.scanFromCreated({from:Alpine.store("publicKey")},{limit:100}).then(function(t){t.forEach(function(t){n.addresses[t.to]=t.to})}).catch(function(t){throw t})),t.includes("claims")&&(n.claims={},"pool"==Alpine.store("resource")?Xeta.claim.scanIssuerHolder({issuer:gup("address"),holder:Alpine.store("publicKey")},{limit:100}).then(function(t){t.forEach(function(t){n.claims[t.hash]=[t.hash.slice(0,10)+"..",t.tokenAmount?t.tokenAmount+" Tokens":t.xetaAmount?t.xetaAmount+" XETA":"",t.unlocks?"Unlocks: "+new Date(t.unlocks).toLocaleDateString():""].join(" ")})}).catch(function(t){throw t}):Xeta.claim.scanHolderCreated({holder:Alpine.store("publicKey")},{limit:100}).then(function(t){t.forEach(function(t){n.claims[t.hash]=[t.hash.slice(0,10)+"..",t.tokenAmount?t.tokenAmount+" Tokens":t.xetaAmount?t.xetaAmount+" XETA":"",t.unlocks?"Unlocks: "+new Date(t.unlocks).toLocaleDateString():""].join(" ")})}).catch(function(t){throw t}))):this.inputs.length&&alert("Please reconnect your Xeta wallet.")},data(){var e=Object.fromEntries(this.inputs.map(function(t){return[t.name,t.type]})),i={};return Object.entries(this.values).forEach(function(t){var n="string"==typeof t[1]?t[1].trim():t[1];null!=n&&""!==n&&(n="string"==e[t[0]]?String(n):"strings"==e[t[0]]?n.split(String.fromCharCode(10)):"number"==e[t[0]]?parseFloat(n):"numbers"==e[t[0]]?n.split(String.fromCharCode(10)).map(function(t){return parseFloat(t)}):"hash"==e[t[0]]?String(n):"hashes"==e[t[0]]?n.split(String.fromCharCode(10)):"text"==e[t[0]]?String(n):"integer"==e[t[0]]?parseInt(n):"timestamp"==e[t[0]]?new Date(n).getTime():"amount"==e[t[0]]?String(n):"boolean"==e[t[0]]?!!n:"object"==e[t[0]]?JSON.parse(n):String(n),i[t[0]]=n)}),i},submit(){var n;this.transacting||(Xeta.config.privateKey?this.confirmation&&!confirm(this.confirmation+" This blockchain transaction is irreversable. Continue?")||((n=this).transacting=!0,Xeta.instruction.wrap(Object.assign({},{function:this.function},this.data())).then(function(t){["address.update","token.update","claim.update","claim.resolve"].includes(n.function)?window.location.reload():showModal("confirmationModal",{transaction:t,details:formatDetails(t,"transaction")}),n.transacting=!1}).catch(function(t){console.log(t.message),n.transacting=!1,alert(t),"quota:limited"==t.message&&(window.location.href="/pages/quota")})):alert("Please (re)connect your wallet."))},preview(t){var n,e;this.uploading||((n=this).uploading=!0,t=t.target.files[0],(e=new FileReader).readAsDataURL(t),e.onloadend=function(){ajax("https://interface.xetareality.com/media",{data:e.result},function(t){n.values.preview=JSON.parse(t).url,n.uploading=!1},function(t){alert("upload:error")})})},info(t){if(this.function){var n=this.function.split(".")[0];return Infos[n]&&Infos[n][t]?Infos[n][t]:Infos.custom[t]||""}}}}</script><div x-cloak name="transactModal" id="transact-modal" x-show.transition.opacity="$store.modal == 'transactModal'" x-data="transactModal" class="z-50 fixed w-full h-full top-0 left-0"><div @click="hideModal()" class="backdrop absolute w-full h-full bg-black opacity-75 z-0"></div><div @click="hideModal()" class="relative cursor-pointer flex w-full justify-center py-4 text-white text-sm z-50"><svg class="fill-current text-white mt-0.5" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18"><path d="M14.53 4.53l-1.06-1.06L9 7.94 4.53 3.47 3.47 4.53 7.94 9l-4.47 4.47 1.06 1.06L9 10.06l4.47 4.47 1.06-1.06L10.06 9z"></path></svg> <span class="ml-1">Close</span></div><div class="overflow-scroll max-h-full mx-auto w-full md:w-1/2 pb-32 z-50 relative disable-scrollbar"><div class="rounded-2xl shadow w-full relative bg-pink-900 px-4 lg:px-8 py-4 bg-top bg-cover" style="background-image:url(/media/background.jpg)"><p class="w-full px-4 pb-4 text-2xl text-center text-white" x-text="title"></p><p class="w-full px-4 pb-4 text-sm text-center text-white" x-text="description"></p><div x-cloak x-show="transacting" class="flex justify-center"><div class="spinner"></div></div><form x-cloak x-show="!transacting" x-data><template x-for="input in inputs"><div class="mb-6 w-full"><label class="text-gray-200 text-xs font-semibold uppercase mb-2 block" x-text="input.name+' - '+info(input.name)+(input.required ? ' (required)' : '')"></label><template x-if="['hash', 'string'].includes(input.type)"><div class="relative"><input x-model="values[input.name]" :data-rules="JSON.stringify(['maxLength:256']
                                        .concat(input.required ? 'required' : 'optional')
                                        .concat(input.type == 'hash' ? ['minLength:32', 'maxLength:44'] : []))" @input="validate($el)" @blur="validate($el)" type="text" class="rounded-2xl shadow border-pink-300 border-opacity-50 focus:border-pink-400 border-2 transition-all px-4 py-2 bg-transparent text-gray-100 outline-none focus:outline-none overflow-hidden w-full focus:ring focus:ring-purple-500"><p class="text-gray-200 text-xs mt-2 hidden"></p><div x-show="input.suggest" class="absolute right-0 top-0 px-5 py-2.5 cursor-pointer"><span class="text-white"><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="currentColor" class="" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/></svg> </span><select x-model="values[input.name]" class="opacity-0 absolute top-0 left-0 w-full h-full no-arrow py-1 cursor-pointer text-gray-600 outline-none focus:outline-none"><option value="" selected="selected">Custom</option><template x-for="[k, v] in (input.suggest ? Object.entries($data[input.suggest]) : [])"><option :value="k" x-text="v"></option></template></select></div><div x-show="input.name == 'preview'" class="absolute right-0 top-0 px-5 py-3.5 cursor-pointer"><span class="text-white"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-cloud-upload" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4.406 1.342A5.53 5.53 0 0 1 8 0c2.69 0 4.923 2 5.166 4.579C14.758 4.804 16 6.137 16 7.773 16 9.569 14.502 11 12.687 11H10a.5.5 0 0 1 0-1h2.688C13.979 10 15 8.988 15 7.773c0-1.216-1.02-2.228-2.313-2.228h-.5v-.5C12.188 2.825 10.328 1 8 1a4.53 4.53 0 0 0-2.941 1.1c-.757.652-1.153 1.438-1.153 2.055v.448l-.445.049C2.064 4.805 1 5.952 1 7.318 1 8.785 2.23 10 3.781 10H6a.5.5 0 0 1 0 1H3.781C1.708 11 0 9.366 0 7.318c0-1.763 1.266-3.223 2.942-3.593.143-.863.698-1.723 1.464-2.383z"/><path fill-rule="evenodd" d="M7.646 4.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 5.707V14.5a.5.5 0 0 1-1 0V5.707L5.354 7.854a.5.5 0 1 1-.708-.708l3-3z"/></svg> </span><input @change="preview($event)" class="opacity-0 absolute top-0 left-0 w-full h-full no-arrow py-1 cursor-pointer text-gray-600 outline-none focus:outline-none" name="media" type="file" accept="image/bmp,image/gif,image/jpeg,image/png,image/tiff,image/webp"></div></div></template><template x-if="['integer', 'timestamp', 'number', 'amount'].includes(input.type)"><div><input x-model="values[input.name]" :data-rules="JSON.stringify(['min:0']
                                        .concat(input.required ? 'required' : 'optional'))" @input="validate($el)" @blur="validate($el)" :type="input.type == 'timestamp' ? 'datetime-local' : 'number'" class="rounded-2xl shadow border-pink-300 border-opacity-50 focus:border-pink-400 border-2 transition-all px-4 py-2 bg-transparent text-gray-100 outline-none focus:outline-none overflow-hidden w-full focus:ring focus:ring-purple-500"><p class="text-gray-200 text-xs mt-2 hidden"></p></div></template><template x-if="['text', 'object', 'strings', 'hashes', 'numbers'].includes(input.type)"><div><span x-cloak x-show="['strings', 'hashes', 'numbers'].includes(input.type)" class="text-gray-200 text-xs capitalize mb-2 block">One per line</span> <textarea x-model="values[input.name]" :data-rules="JSON.stringify(['maxLength:8192']
                                        .concat(input.type == 'object' ? 'json' : [])
                                        .concat(input.required ? 'required' : []))" @input="validate($el)" @blur="validate($el)" type="text" rows="3" class="rounded-2xl shadow border-pink-300 border-opacity-50 focus:border-pink-400 border-2 transition-all px-4 py-2 bg-transparent text-gray-100 font-light outline-none focus:outline-none overflow-hidden w-full focus:ring focus:ring-purple-500"></textarea><p class="text-gray-200 text-xs mt-2 hidden"></p></div></template><template x-if="['boolean'].includes(input.type)"><div><label class="text-gray-200 text-xs font-semibold uppercase mb-2 block cursor-pointer items-center flex select-none"><input :checked="values[input.name]" x-model="values[input.name]" type="checkbox" class="mr-2 h-6 w-6"> <span>Yes</span></label></div></template></div></template><div><button @click.prevent="validForm($root) ? submit() : ''" type="submit" class="cursor-pointer text-white py-2 px-4 rounded-2xl block text-center bg-black hover:bg-gray-800 transition-all w-full focus:ring focus:ring-purple-500">Submit</button></div></form></div></div></div>